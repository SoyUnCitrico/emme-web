import{r as y,j as x}from"./index-da0124c0.js";import{T as Mr,a as Fr,b as Ir,c as sn,d as Fe,e as ht,L as ns,f as ie,F as Ie,C as w,S as nn,P as rn,D as on,M as Y,g as H,V as ft,h as ce,i as _,I as an,j as Gr,O as Bt,v as yr,k as cn,l as un,B as oe,m as ln,n as pt,o as mt,R as Ge,p as An,q as Ce,r as dn,s as Ct,t as hn,u as fn,w as rs,x as Bn,y as pn,z as mn,A as Cn,E as gn,G as Tn,H as ge,J as En,K as Rn,N as Mn,Q as Fn,U as In,W as Gn,X as gt,Y as Tt,Z as yn,_ as Dn,$ as bn,a0 as Ln,a1 as Hn,a2 as Sn,a3 as _n,a4 as xn,a5 as wn,a6 as tt,a7 as st,a8 as nt,a9 as rt,aa as On,ab as vn,ac as Pn,ad as Et,ae as ue,af as ve,ag as Es,ah as Nn}from"./Home-0d61265c.js";var is=Xe(),R=t=>je(t,is),os=Xe();R.write=t=>je(t,os);var Rt=Xe();R.onStart=t=>je(t,Rt);var as=Xe();R.onFrame=t=>je(t,as);var cs=Xe();R.onFinish=t=>je(t,cs);var Te=[];R.setTimeout=(t,e)=>{const s=R.now()+e,n=()=>{const i=Te.findIndex(o=>o.cancel==n);~i&&Te.splice(i,1),re-=~i?1:0},r={time:s,handler:t,cancel:n};return Te.splice(Jn(s),0,r),re+=1,Un(),r};var Jn=t=>~(~Te.findIndex(e=>e.time>t)||~Te.length);R.cancel=t=>{Rt.delete(t),as.delete(t),cs.delete(t),is.delete(t),os.delete(t)};R.sync=t=>{kt=!0,R.batchedUpdates(t),kt=!1};R.throttle=t=>{let e;function s(){try{t(...e)}finally{e=null}}function n(...r){e=r,R.onStart(s)}return n.handler=t,n.cancel=()=>{Rt.delete(s),e=null},n};var us=typeof window<"u"?window.requestAnimationFrame:()=>{};R.use=t=>us=t;R.now=typeof performance<"u"?()=>performance.now():Date.now;R.batchedUpdates=t=>t();R.catch=console.error;R.frameLoop="always";R.advance=()=>{R.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):kn()};var ne=-1,re=0,kt=!1;function je(t,e){kt?(e.delete(t),t(0)):(e.add(t),Un())}function Un(){ne<0&&(ne=0,R.frameLoop!=="demand"&&us(Kn))}function Dr(){ne=-1}function Kn(){~ne&&(us(Kn),R.batchedUpdates(kn))}function kn(){const t=ne;ne=R.now();const e=Jn(ne);if(e&&(Qn(Te.splice(0,e),s=>s.handler()),re-=e),!re){Dr();return}Rt.flush(),is.flush(t?Math.min(64,ne-t):16.667),as.flush(),os.flush(),cs.flush()}function Xe(){let t=new Set,e=t;return{add(s){re+=e==t&&!t.has(s)?1:0,t.add(s)},delete(s){return re-=e==t&&t.has(s)?1:0,t.delete(s)},flush(s){e.size&&(t=new Set,re-=e.size,Qn(e,n=>n(s)&&t.add(n)),re+=t.size,e=t)}}}function Qn(t,e){t.forEach(s=>{try{e(s)}catch(n){R.catch(n)}})}var br=Object.defineProperty,Lr=(t,e)=>{for(var s in e)br(t,s,{get:e[s],enumerable:!0})},j={};Lr(j,{assign:()=>Sr,colors:()=>ae,createStringInterpolator:()=>As,skipAnimation:()=>Xn,to:()=>jn,willAdvance:()=>ds});function Qt(){}var Hr=(t,e,s)=>Object.defineProperty(t,e,{value:s,writable:!0,configurable:!0}),E={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Z(t,e){if(E.arr(t)){if(!E.arr(e)||t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}return t===e}var b=(t,e)=>t.forEach(e);function z(t,e,s){if(E.arr(t)){for(let n=0;n<t.length;n++)e.call(s,t[n],`${n}`);return}for(const n in t)t.hasOwnProperty(n)&&e.call(s,t[n],n)}var U=t=>E.und(t)?[]:E.arr(t)?t:[t];function xe(t,e){if(t.size){const s=Array.from(t);t.clear(),b(s,e)}}var _e=(t,...e)=>xe(t,s=>s(...e)),ls=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),As,jn,ae=null,Xn=!1,ds=Qt,Sr=t=>{t.to&&(jn=t.to),t.now&&(R.now=t.now),t.colors!==void 0&&(ae=t.colors),t.skipAnimation!=null&&(Xn=t.skipAnimation),t.createStringInterpolator&&(As=t.createStringInterpolator),t.requestAnimationFrame&&R.use(t.requestAnimationFrame),t.batchedUpdates&&(R.batchedUpdates=t.batchedUpdates),t.willAdvance&&(ds=t.willAdvance),t.frameLoop&&(R.frameLoop=t.frameLoop)},we=new Set,J=[],Lt=[],it=0,Mt={get idle(){return!we.size&&!J.length},start(t){it>t.priority?(we.add(t),R.onStart(_r)):(Vn(t),R(jt))},advance:jt,sort(t){if(it)R.onFrame(()=>Mt.sort(t));else{const e=J.indexOf(t);~e&&(J.splice(e,1),Yn(t))}},clear(){J=[],we.clear()}};function _r(){we.forEach(Vn),we.clear(),R(jt)}function Vn(t){J.includes(t)||Yn(t)}function Yn(t){J.splice(xr(J,e=>e.priority>t.priority),0,t)}function jt(t){const e=Lt;for(let s=0;s<J.length;s++){const n=J[s];it=n.priority,n.idle||(ds(n),n.advance(t),n.idle||e.push(n))}return it=0,Lt=J,Lt.length=0,J=e,J.length>0}function xr(t,e){const s=t.findIndex(e);return s<0?t.length:s}var wr=(t,e,s)=>Math.min(Math.max(s,t),e),Or={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Q="[-+]?\\d*\\.?\\d+",ot=Q+"%";function Ft(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var vr=new RegExp("rgb"+Ft(Q,Q,Q)),Pr=new RegExp("rgba"+Ft(Q,Q,Q,Q)),Nr=new RegExp("hsl"+Ft(Q,ot,ot)),Jr=new RegExp("hsla"+Ft(Q,ot,ot,Q)),Ur=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Kr=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kr=/^#([0-9a-fA-F]{6})$/,Qr=/^#([0-9a-fA-F]{8})$/;function jr(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=kr.exec(t))?parseInt(e[1]+"ff",16)>>>0:ae&&ae[t]!==void 0?ae[t]:(e=vr.exec(t))?(me(e[1])<<24|me(e[2])<<16|me(e[3])<<8|255)>>>0:(e=Pr.exec(t))?(me(e[1])<<24|me(e[2])<<16|me(e[3])<<8|Fs(e[4]))>>>0:(e=Ur.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Qr.exec(t))?parseInt(e[1],16)>>>0:(e=Kr.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Nr.exec(t))?(Rs(Ms(e[1]),Ze(e[2]),Ze(e[3]))|255)>>>0:(e=Jr.exec(t))?(Rs(Ms(e[1]),Ze(e[2]),Ze(e[3]))|Fs(e[4]))>>>0:null}function Ht(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Rs(t,e,s){const n=s<.5?s*(1+e):s+e-s*e,r=2*s-n,i=Ht(r,n,t+1/3),o=Ht(r,n,t),c=Ht(r,n,t-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(c*255)<<8}function me(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function Ms(t){return(parseFloat(t)%360+360)%360/360}function Fs(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Ze(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Is(t){let e=jr(t);if(e===null)return t;e=e||0;const s=(e&4278190080)>>>24,n=(e&16711680)>>>16,r=(e&65280)>>>8,i=(e&255)/255;return`rgba(${s}, ${n}, ${r}, ${i})`}var Pe=(t,e,s)=>{if(E.fun(t))return t;if(E.arr(t))return Pe({range:t,output:e,extrapolate:s});if(E.str(t.output[0]))return As(t);const n=t,r=n.output,i=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",c=n.extrapolateRight||n.extrapolate||"extend",a=n.easing||(u=>u);return u=>{const A=Vr(u,i);return Xr(u,i[A],i[A+1],r[A],r[A+1],a,o,c,n.map)}};function Xr(t,e,s,n,r,i,o,c,a){let u=a?a(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>s){if(c==="identity")return u;c==="clamp"&&(u=s)}return n===r?n:e===s?t<=e?n:r:(e===-1/0?u=-u:s===1/0?u=u-e:u=(u-e)/(s-e),u=i(u),n===-1/0?u=-u:r===1/0?u=u+n:u=u*(r-n)+n,u)}function Vr(t,e){for(var s=1;s<e.length-1&&!(e[s]>=t);++s);return s-1}var Yr=(t,e="end")=>s=>{s=e==="end"?Math.min(s,.999):Math.max(s,.001);const n=s*t,r=e==="end"?Math.floor(n):Math.ceil(n);return wr(0,1,r/t)},at=1.70158,We=at*1.525,Gs=at+1,ys=2*Math.PI/3,Ds=2*Math.PI/4.5,qe=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,Zr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>Gs*t*t*t-at*t*t,easeOutBack:t=>1+Gs*Math.pow(t-1,3)+at*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((We+1)*2*t-We)/2:(Math.pow(2*t-2,2)*((We+1)*(t*2-2)+We)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*ys),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*ys)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*Ds))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*Ds)/2+1,easeInBounce:t=>1-qe(1-t),easeOutBounce:qe,easeInOutBounce:t=>t<.5?(1-qe(1-2*t))/2:(1+qe(2*t-1))/2,steps:Yr},Ne=Symbol.for("FluidValue.get"),ye=Symbol.for("FluidValue.observers"),V=t=>!!(t&&t[Ne]),N=t=>t&&t[Ne]?t[Ne]():t,bs=t=>t[ye]||null;function Wr(t,e){t.eventObserved?t.eventObserved(e):t(e)}function ct(t,e){const s=t[ye];s&&s.forEach(n=>{Wr(n,e)})}var qr=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");zr(this,t)}},zr=(t,e)=>Zn(t,Ne,e);function Ve(t,e){if(t[Ne]){let s=t[ye];s||Zn(t,ye,s=new Set),s.has(e)||(s.add(e),t.observerAdded&&t.observerAdded(s.size,e))}return e}function ut(t,e){const s=t[ye];if(s&&s.has(e)){const n=s.size-1;n?s.delete(e):t[ye]=null,t.observerRemoved&&t.observerRemoved(n,e)}}var Zn=(t,e,s)=>Object.defineProperty(t,e,{value:s,writable:!0,configurable:!0}),et=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,$r=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ls=new RegExp(`(${et.source})(%|[a-z]+)`,"i"),ei=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,It=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Wn=t=>{const[e,s]=ti(t);if(!e||ls())return t;const n=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(n)return n.trim();if(s&&s.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(s);return r||t}else{if(s&&It.test(s))return Wn(s);if(s)return s}return t},ti=t=>{const e=It.exec(t);if(!e)return[,];const[,s,n]=e;return[s,n]},St,si=(t,e,s,n,r)=>`rgba(${Math.round(e)}, ${Math.round(s)}, ${Math.round(n)}, ${r})`,qn=t=>{St||(St=ae?new RegExp(`(${Object.keys(ae).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(i=>N(i).replace(It,Wn).replace($r,Is).replace(St,Is)),s=e.map(i=>i.match(et).map(Number)),r=s[0].map((i,o)=>s.map(c=>{if(!(o in c))throw Error('The arity of each "output" value must be equal');return c[o]})).map(i=>Pe({...t,output:i}));return i=>{var a;const o=!Ls.test(e[0])&&((a=e.find(u=>Ls.test(u)))==null?void 0:a.replace(et,""));let c=0;return e[0].replace(et,()=>`${r[c++](i)}${o||""}`).replace(ei,si)}},hs="react-spring: ",zn=t=>{const e=t;let s=!1;if(typeof e!="function")throw new TypeError(`${hs}once requires a function parameter`);return(...n)=>{s||(e(...n),s=!0)}},ni=zn(console.warn);function ri(){ni(`${hs}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var ii=zn(console.warn);function oi(){ii(`${hs}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Gt(t){return E.str(t)&&(t[0]=="#"||/\d/.test(t)||!ls()&&It.test(t)||t in(ae||{}))}var fs=ls()?y.useEffect:y.useLayoutEffect,ai=()=>{const t=y.useRef(!1);return fs(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function $n(){const t=y.useState()[1],e=ai();return()=>{e.current&&t(Math.random())}}function ci(t,e){const[s]=y.useState(()=>({inputs:e,result:t()})),n=y.useRef(),r=n.current;let i=r;return i?e&&i.inputs&&ui(e,i.inputs)||(i={inputs:e,result:t()}):i=s,y.useEffect(()=>{n.current=i,r==s&&(s.inputs=s.result=void 0)},[i]),i.result}function ui(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}var er=t=>y.useEffect(t,li),li=[];function Hs(t){const e=y.useRef();return y.useEffect(()=>{e.current=t}),e.current}var Je=Symbol.for("Animated:node"),Ai=t=>!!t&&t[Je]===t,X=t=>t&&t[Je],Bs=(t,e)=>Hr(t,Je,e),yt=t=>t&&t[Je]&&t[Je].getPayload(),tr=class{constructor(){Bs(this,this)}getPayload(){return this.payload||[]}},Ye=class extends tr{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,E.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Ye(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return E.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,E.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Ue=class extends Ye{constructor(t){super(0),this._string=null,this._toString=Pe({output:[t,t]})}static create(t){return new Ue(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(E.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Pe({output:[this.getValue(),t]})),this._value=0,super.reset()}},lt={dependencies:null},ps=class extends tr{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return z(this.source,(s,n)=>{Ai(s)?e[n]=s.getValue(t):V(s)?e[n]=N(s):t||(e[n]=s)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&b(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return z(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){lt.dependencies&&V(t)&&lt.dependencies.add(t);const e=yt(t);e&&b(e,s=>this.add(s))}},sr=class extends ps{constructor(t){super(t)}static create(t){return new sr(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((s,n)=>s.setValue(t[n])).some(Boolean):(super.setValue(t.map(di)),!0)}};function di(t){return(Gt(t)?Ue:Ye).create(t)}function Xt(t){const e=X(t);return e?e.constructor:E.arr(t)?sr:Gt(t)?Ue:Ye}var Ss=(t,e)=>{const s=!E.fun(t)||t.prototype&&t.prototype.isReactComponent;return y.forwardRef((n,r)=>{const i=y.useRef(null),o=s&&y.useCallback(f=>{i.current=Bi(r,f)},[r]),[c,a]=fi(n,e),u=$n(),A=()=>{const f=i.current;if(s&&!f)return;(f?e.applyAnimatedValues(f,c.getValue(!0)):!1)===!1&&u()},l=new hi(A,a),d=y.useRef();fs(()=>(d.current=l,b(a,f=>Ve(f,l)),()=>{d.current&&(b(d.current.deps,f=>ut(f,d.current)),R.cancel(d.current.update))})),y.useEffect(A,[]),er(()=>()=>{const f=d.current;b(f.deps,p=>ut(p,f))});const h=e.getComponentProps(c.getValue());return y.createElement(t,{...h,ref:o})})},hi=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&R.write(this.update)}};function fi(t,e){const s=new Set;return lt.dependencies=s,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new ps(t),lt.dependencies=null,[t,s]}function Bi(t,e){return t&&(E.fun(t)?t(e):t.current=e),e}var _s=Symbol.for("AnimatedComponent"),pi=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:s=r=>new ps(r),getComponentProps:n=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:s,getComponentProps:n},i=o=>{const c=xs(o)||"Anonymous";return E.str(o)?o=i[o]||(i[o]=Ss(o,r)):o=o[_s]||(o[_s]=Ss(o,r)),o.displayName=`Animated(${c})`,o};return z(t,(o,c)=>{E.arr(t)&&(c=xs(o)),i[c]=i(o)}),{animated:i}},xs=t=>E.str(t)?t:t&&E.str(t.displayName)?t.displayName:E.fun(t)&&t.name||null;function de(t,...e){return E.fun(t)?t(...e):t}var Oe=(t,e)=>t===!0||!!(e&&t&&(E.fun(t)?t(e):U(t).includes(e))),nr=(t,e)=>E.obj(t)?e&&t[e]:t,rr=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,mi=t=>t,ms=(t,e=mi)=>{let s=Ci;t.default&&t.default!==!0&&(t=t.default,s=Object.keys(t));const n={};for(const r of s){const i=e(t[r],r);E.und(i)||(n[r]=i)}return n},Ci=["config","onProps","onStart","onChange","onPause","onResume","onRest"],gi={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ti(t){const e={};let s=0;if(z(t,(n,r)=>{gi[r]||(e[r]=n,s++)}),s)return e}function ir(t){const e=Ti(t);if(e){const s={to:e};return z(t,(n,r)=>r in e||(s[r]=n)),s}return{...t}}function Ke(t){return t=N(t),E.arr(t)?t.map(Ke):Gt(t)?j.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function Ei(t){for(const e in t)return!0;return!1}function Vt(t){return E.fun(t)||E.arr(t)&&E.obj(t[0])}function Ri(t,e){var s;(s=t.ref)==null||s.delete(t),e==null||e.delete(t)}function Mi(t,e){var s;e&&t.ref!==e&&((s=t.ref)==null||s.delete(t),e.add(t),t.ref=e)}var Fi={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Yt={...Fi.default,mass:1,damping:1,easing:Zr.linear,clamp:!1},Ii=class{constructor(){this.velocity=0,Object.assign(this,Yt)}};function Gi(t,e,s){s&&(s={...s},ws(s,e),e={...s,...e}),ws(t,e),Object.assign(t,e);for(const o in Yt)t[o]==null&&(t[o]=Yt[o]);let{frequency:n,damping:r}=t;const{mass:i}=t;return E.und(n)||(n<.01&&(n=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/n,2)*i,t.friction=4*Math.PI*r*i/n),t}function ws(t,e){if(!E.und(e.decay))t.duration=void 0;else{const s=!E.und(e.tension)||!E.und(e.friction);(s||!E.und(e.frequency)||!E.und(e.damping)||!E.und(e.mass))&&(t.duration=void 0,t.decay=void 0),s&&(t.frequency=void 0)}}var Os=[],yi=class{constructor(){this.changed=!1,this.values=Os,this.toValues=null,this.fromValues=Os,this.config=new Ii,this.immediate=!1}};function or(t,{key:e,props:s,defaultProps:n,state:r,actions:i}){return new Promise((o,c)=>{let a,u,A=Oe(s.cancel??(n==null?void 0:n.cancel),e);if(A)h();else{E.und(s.pause)||(r.paused=Oe(s.pause,e));let f=n==null?void 0:n.pause;f!==!0&&(f=r.paused||Oe(f,e)),a=de(s.delay||0,e),f?(r.resumeQueue.add(d),i.pause()):(i.resume(),d())}function l(){r.resumeQueue.add(d),r.timeouts.delete(u),u.cancel(),a=u.time-R.now()}function d(){a>0&&!j.skipAnimation?(r.delayed=!0,u=R.setTimeout(h,a),r.pauseQueue.add(l),r.timeouts.add(u)):h()}function h(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(l),r.timeouts.delete(u),t<=(r.cancelId||0)&&(A=!0);try{i.start({...s,callId:t,cancel:A},o)}catch(f){c(f)}}})}var Cs=(t,e)=>e.length==1?e[0]:e.some(s=>s.cancelled)?Ee(t.get()):e.every(s=>s.noop)?ar(t.get()):k(t.get(),e.every(s=>s.finished)),ar=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),k=(t,e,s=!1)=>({value:t,finished:e,cancelled:s}),Ee=t=>({value:t,cancelled:!0,finished:!1});function cr(t,e,s,n){const{callId:r,parentId:i,onRest:o}=e,{asyncTo:c,promise:a}=s;return!i&&t===c&&!e.reset?a:s.promise=(async()=>{s.asyncId=r,s.asyncTo=t;const u=ms(e,(B,m)=>m==="onRest"?void 0:B);let A,l;const d=new Promise((B,m)=>(A=B,l=m)),h=B=>{const m=r<=(s.cancelId||0)&&Ee(n)||r!==s.asyncId&&k(n,!1);if(m)throw B.result=m,l(B),B},f=(B,m)=>{const C=new vs,T=new Ps;return(async()=>{if(j.skipAnimation)throw ke(s),T.result=k(n,!1),l(T),T;h(C);const g=E.obj(B)?{...B}:{...m,to:B};g.parentId=r,z(u,(L,I)=>{E.und(g[I])&&(g[I]=L)});const M=await n.start(g);return h(C),s.paused&&await new Promise(L=>{s.resumeQueue.add(L)}),M})()};let p;if(j.skipAnimation)return ke(s),k(n,!1);try{let B;E.arr(t)?B=(async m=>{for(const C of m)await f(C)})(t):B=Promise.resolve(t(f,n.stop.bind(n))),await Promise.all([B.then(A),d]),p=k(n.get(),!0,!1)}catch(B){if(B instanceof vs)p=B.result;else if(B instanceof Ps)p=B.result;else throw B}finally{r==s.asyncId&&(s.asyncId=i,s.asyncTo=i?c:void 0,s.promise=i?a:void 0)}return E.fun(o)&&R.batchedUpdates(()=>{o(p,n,n.item)}),p})()}function ke(t,e){xe(t.timeouts,s=>s.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var vs=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Ps=class extends Error{constructor(){super("SkipAnimationSignal")}},Zt=t=>t instanceof gs,Di=1,gs=class extends qr{constructor(){super(...arguments),this.id=Di++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=X(this);return t&&t.getValue()}to(...t){return j.to(this,t)}interpolate(...t){return ri(),j.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){ct(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Mt.sort(this),ct(this,{type:"priority",parent:this,priority:t})}},fe=Symbol.for("SpringPhase"),ur=1,Wt=2,qt=4,_t=t=>(t[fe]&ur)>0,$=t=>(t[fe]&Wt)>0,De=t=>(t[fe]&qt)>0,Ns=(t,e)=>e?t[fe]|=Wt|ur:t[fe]&=~Wt,Js=(t,e)=>e?t[fe]|=qt:t[fe]&=~qt,bi=class extends gs{constructor(t,e){if(super(),this.animation=new yi,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!E.und(t)||!E.und(e)){const s=E.obj(t)?{...t}:{...e,from:t};E.und(s.default)&&(s.default=!0),this.start(s)}}get idle(){return!($(this)||this._state.asyncTo)||De(this)}get goal(){return N(this.animation.to)}get velocity(){const t=X(this);return t instanceof Ye?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return _t(this)}get isAnimating(){return $(this)}get isPaused(){return De(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,s=!1;const n=this.animation;let{toValues:r}=n;const{config:i}=n,o=yt(n.to);!o&&V(n.to)&&(r=U(N(n.to))),n.values.forEach((u,A)=>{if(u.done)return;const l=u.constructor==Ue?1:o?o[A].lastPosition:r[A];let d=n.immediate,h=l;if(!d){if(h=u.lastPosition,i.tension<=0){u.done=!0;return}let f=u.elapsedTime+=t;const p=n.fromValues[A],B=u.v0!=null?u.v0:u.v0=E.arr(i.velocity)?i.velocity[A]:i.velocity;let m;const C=i.precision||(p==l?.005:Math.min(1,Math.abs(l-p)*.001));if(E.und(i.duration))if(i.decay){const T=i.decay===!0?.998:i.decay,g=Math.exp(-(1-T)*f);h=p+B/(1-T)*(1-g),d=Math.abs(u.lastPosition-h)<=C,m=B*g}else{m=u.lastVelocity==null?B:u.lastVelocity;const T=i.restVelocity||C/10,g=i.clamp?0:i.bounce,M=!E.und(g),L=p==l?u.v0>0:p<l;let I,S=!1;const D=1,O=Math.ceil(t/D);for(let K=0;K<O&&(I=Math.abs(m)>T,!(!I&&(d=Math.abs(l-h)<=C,d)));++K){M&&(S=h==l||h>l==L,S&&(m=-m*g,h=l));const Be=-i.tension*1e-6*(h-l),pe=-i.friction*.001*m,Rr=(Be+pe)/i.mass;m=m+Rr*D,h=h+m*D}}else{let T=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,f=u.elapsedTime+=t)),T=(i.progress||0)+f/this._memoizedDuration,T=T>1?1:T<0?0:T,u.durationProgress=T),h=p+i.easing(T)*(l-p),m=(h-u.lastPosition)/t,d=T==1}u.lastVelocity=m,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[A].done&&(d=!1),d?u.done=!0:e=!1,u.setValue(h,i.round)&&(s=!0)});const c=X(this),a=c.getValue();if(e){const u=N(n.to);(a!==u||s)&&!i.decay?(c.setValue(u),this._onChange(u)):s&&i.decay&&this._onChange(a),this._stop()}else s&&this._onChange(a)}set(t){return R.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if($(this)){const{to:t,config:e}=this.animation;R.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let s;return E.und(t)?(s=this.queue||[],this.queue=[]):s=[E.obj(t)?t:{...e,to:t}],Promise.all(s.map(n=>this._update(n))).then(n=>Cs(this,n))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),ke(this._state,t&&this._lastCallId),R.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:s,from:n}=t;s=E.obj(s)?s[e]:s,(s==null||Vt(s))&&(s=void 0),n=E.obj(n)?n[e]:n,n==null&&(n=void 0);const r={to:s,from:n};return _t(this)||(t.reverse&&([s,n]=[n,s]),n=N(n),E.und(n)?X(this)||this._set(s):this._set(n)),r}_update({...t},e){const{key:s,defaultProps:n}=this;t.default&&Object.assign(n,ms(t,(o,c)=>/^on/.test(c)?nr(o,s):o)),Ks(this,t,"onProps"),Le(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return or(++this._lastCallId,{key:s,props:t,defaultProps:n,state:i,actions:{pause:()=>{De(this)||(Js(this,!0),_e(i.pauseQueue),Le(this,"onPause",k(this,be(this,this.animation.to)),this))},resume:()=>{De(this)&&(Js(this,!1),$(this)&&this._resume(),_e(i.resumeQueue),Le(this,"onResume",k(this,be(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const c=lr(t);if(c)return this._update(c,!0)}return o})}_merge(t,e,s){if(e.cancel)return this.stop(!0),s(Ee(this));const n=!E.und(t.to),r=!E.und(t.from);if(n||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return s(Ee(this));const{key:i,defaultProps:o,animation:c}=this,{to:a,from:u}=c;let{to:A=a,from:l=u}=t;r&&!n&&(!e.default||E.und(A))&&(A=l),e.reverse&&([A,l]=[l,A]);const d=!Z(l,u);d&&(c.from=l),l=N(l);const h=!Z(A,a);h&&this._focus(A);const f=Vt(e.to),{config:p}=c,{decay:B,velocity:m}=p;(n||r)&&(p.velocity=0),e.config&&!f&&Gi(p,de(e.config,i),e.config!==o.config?de(o.config,i):void 0);let C=X(this);if(!C||E.und(A))return s(k(this,!0));const T=E.und(e.reset)?r&&!e.default:!E.und(l)&&Oe(e.reset,i),g=T?l:this.get(),M=Ke(A),L=E.num(M)||E.arr(M)||Gt(M),I=!f&&(!L||Oe(o.immediate||e.immediate,i));if(h){const K=Xt(A);if(K!==C.constructor)if(I)C=this._set(M);else throw Error(`Cannot animate between ${C.constructor.name} and ${K.name}, as the "to" prop suggests`)}const S=C.constructor;let D=V(A),O=!1;if(!D){const K=T||!_t(this)&&d;(h||K)&&(O=Z(Ke(g),M),D=!O),(!Z(c.immediate,I)&&!I||!Z(p.decay,B)||!Z(p.velocity,m))&&(D=!0)}if(O&&$(this)&&(c.changed&&!T?D=!0:D||this._stop(a)),!f&&((D||V(a))&&(c.values=C.getPayload(),c.toValues=V(A)?null:S==Ue?[1]:U(M)),c.immediate!=I&&(c.immediate=I,!I&&!T&&this._set(a)),D)){const{onRest:K}=c;b(Hi,pe=>Ks(this,e,pe));const Be=k(this,be(this,a));_e(this._pendingCalls,Be),this._pendingCalls.add(s),c.changed&&R.batchedUpdates(()=>{var pe;c.changed=!T,K==null||K(Be,this),T?de(o.onRest,Be):(pe=c.onStart)==null||pe.call(c,Be,this)})}T&&this._set(g),f?s(cr(e.to,e,this._state,this)):D?this._start():$(this)&&!h?this._pendingCalls.add(s):s(ar(g))}_focus(t){const e=this.animation;t!==e.to&&(bs(this)&&this._detach(),e.to=t,bs(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;V(e)&&(Ve(e,this),Zt(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;V(t)&&ut(t,this)}_set(t,e=!0){const s=N(t);if(!E.und(s)){const n=X(this);if(!n||!Z(s,n.getValue())){const r=Xt(s);!n||n.constructor!=r?Bs(this,r.create(s)):n.setValue(s),n&&R.batchedUpdates(()=>{this._onChange(s,e)})}}return X(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Le(this,"onStart",k(this,be(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),de(this.animation.onChange,t,this)),de(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;X(this).reset(N(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),$(this)||(Ns(this,!0),De(this)||this._resume())}_resume(){j.skipAnimation?this.finish():Mt.start(this)}_stop(t,e){if($(this)){Ns(this,!1);const s=this.animation;b(s.values,r=>{r.done=!0}),s.toValues&&(s.onChange=s.onPause=s.onResume=void 0),ct(this,{type:"idle",parent:this});const n=e?Ee(this.get()):k(this.get(),be(this,t??s.to));_e(this._pendingCalls,n),s.changed&&(s.changed=!1,Le(this,"onRest",n,this))}}};function be(t,e){const s=Ke(e),n=Ke(t.get());return Z(n,s)}function lr(t,e=t.loop,s=t.to){const n=de(e);if(n){const r=n!==!0&&ir(n),i=(r||t).reverse,o=!r||r.reset;return Qe({...t,loop:e,default:!1,pause:void 0,to:!i||Vt(s)?s:void 0,from:o?t.from:void 0,reset:o,...r})}}function Qe(t){const{to:e,from:s}=t=ir(t),n=new Set;return E.obj(e)&&Us(e,n),E.obj(s)&&Us(s,n),t.keys=n.size?Array.from(n):null,t}function Li(t){const e=Qe(t);return E.und(e.default)&&(e.default=ms(e)),e}function Us(t,e){z(t,(s,n)=>s!=null&&e.add(n))}var Hi=["onStart","onRest","onChange","onPause","onResume"];function Ks(t,e,s){t.animation[s]=e[s]!==rr(e,s)?nr(e[s],t.key):void 0}function Le(t,e,...s){var n,r,i,o;(r=(n=t.animation)[e])==null||r.call(n,...s),(o=(i=t.defaultProps)[e])==null||o.call(i,...s)}var Si=["onStart","onChange","onRest"],_i=1,xi=class{constructor(t,e){this.id=_i++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((e,s)=>t[s]=e.get()),t}set(t){for(const e in t){const s=t[e];E.und(s)||this.springs[e].set(s)}}update(t){return t&&this.queue.push(Qe(t)),this}start(t){let{queue:e}=this;return t?e=U(t).map(Qe):this.queue=[],this._flush?this._flush(this,e):(Br(this,e),zt(this,e))}stop(t,e){if(t!==!!t&&(e=t),e){const s=this.springs;b(U(e),n=>s[n].stop(!!t))}else ke(this._state,this._lastAsyncId),this.each(s=>s.stop(!!t));return this}pause(t){if(E.und(t))this.start({pause:!0});else{const e=this.springs;b(U(t),s=>e[s].pause())}return this}resume(t){if(E.und(t))this.start({pause:!1});else{const e=this.springs;b(U(t),s=>e[s].resume())}return this}each(t){z(this.springs,t)}_onFrame(){const{onStart:t,onChange:e,onRest:s}=this._events,n=this._active.size>0,r=this._changed.size>0;(n&&!this._started||r&&!this._started)&&(this._started=!0,xe(t,([c,a])=>{a.value=this.get(),c(a,this,this._item)}));const i=!n&&this._started,o=r||i&&s.size?this.get():null;r&&e.size&&xe(e,([c,a])=>{a.value=o,c(a,this,this._item)}),i&&(this._started=!1,xe(s,([c,a])=>{a.value=o,c(a,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;R.onFrame(this._onFrame)}};function zt(t,e){return Promise.all(e.map(s=>Ar(t,s))).then(s=>Cs(t,s))}async function Ar(t,e,s){const{keys:n,to:r,from:i,loop:o,onRest:c,onResolve:a}=e,u=E.obj(e.default)&&e.default;o&&(e.loop=!1),r===!1&&(e.to=null),i===!1&&(e.from=null);const A=E.arr(r)||E.fun(r)?r:void 0;A?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):b(Si,p=>{const B=e[p];if(E.fun(B)){const m=t._events[p];e[p]=({finished:C,cancelled:T})=>{const g=m.get(B);g?(C||(g.finished=!1),T&&(g.cancelled=!0)):m.set(B,{value:null,finished:C||!1,cancelled:T||!1})},u&&(u[p]=e[p])}});const l=t._state;e.pause===!l.paused?(l.paused=e.pause,_e(e.pause?l.pauseQueue:l.resumeQueue)):l.paused&&(e.pause=!0);const d=(n||Object.keys(t.springs)).map(p=>t.springs[p].start(e)),h=e.cancel===!0||rr(e,"cancel")===!0;(A||h&&l.asyncId)&&d.push(or(++t._lastAsyncId,{props:e,state:l,actions:{pause:Qt,resume:Qt,start(p,B){h?(ke(l,t._lastAsyncId),B(Ee(t))):(p.onRest=c,B(cr(A,p,l,t)))}}})),l.paused&&await new Promise(p=>{l.resumeQueue.add(p)});const f=Cs(t,await Promise.all(d));if(o&&f.finished&&!(s&&f.noop)){const p=lr(e,o,r);if(p)return Br(t,[p]),Ar(t,p,!0)}return a&&R.batchedUpdates(()=>a(f,t,t.item)),f}function ks(t,e){const s={...t.springs};return e&&b(U(e),n=>{E.und(n.keys)&&(n=Qe(n)),E.obj(n.to)||(n={...n,to:void 0}),fr(s,n,r=>hr(r))}),dr(t,s),s}function dr(t,e){z(e,(s,n)=>{t.springs[n]||(t.springs[n]=s,Ve(s,t))})}function hr(t,e){const s=new bi;return s.key=t,e&&Ve(s,e),s}function fr(t,e,s){e.keys&&b(e.keys,n=>{(t[n]||(t[n]=s(n)))._prepareNode(e)})}function Br(t,e){b(e,s=>{fr(t.springs,s,n=>hr(n,t))})}var Dt=({children:t,...e})=>{const s=y.useContext(At),n=e.pause||!!s.pause,r=e.immediate||!!s.immediate;e=ci(()=>({pause:n,immediate:r}),[n,r]);const{Provider:i}=At;return y.createElement(i,{value:e},t)},At=wi(Dt,{});Dt.Provider=At.Provider;Dt.Consumer=At.Consumer;function wi(t,e){return Object.assign(t,y.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var Oi=()=>{const t=[],e=function(n){oi();const r=[];return b(t,(i,o)=>{if(E.und(n))r.push(i.start());else{const c=s(n,i,o);c&&r.push(i.start(c))}}),r};e.current=t,e.add=function(n){t.includes(n)||t.push(n)},e.delete=function(n){const r=t.indexOf(n);~r&&t.splice(r,1)},e.pause=function(){return b(t,n=>n.pause(...arguments)),this},e.resume=function(){return b(t,n=>n.resume(...arguments)),this},e.set=function(n){b(t,(r,i)=>{const o=E.fun(n)?n(i,r):n;o&&r.set(o)})},e.start=function(n){const r=[];return b(t,(i,o)=>{if(E.und(n))r.push(i.start());else{const c=this._getProps(n,i,o);c&&r.push(i.start(c))}}),r},e.stop=function(){return b(t,n=>n.stop(...arguments)),this},e.update=function(n){return b(t,(r,i)=>r.update(this._getProps(n,r,i))),this};const s=function(n,r,i){return E.fun(n)?n(i,r):n};return e._getProps=s,e};function vi(t,e,s){const n=E.fun(e)&&e;n&&!s&&(s=[]);const r=y.useMemo(()=>n||arguments.length==3?Oi():void 0,[]),i=y.useRef(0),o=$n(),c=y.useMemo(()=>({ctrls:[],queue:[],flush(m,C){const T=ks(m,C);return i.current>0&&!c.queue.length&&!Object.keys(T).some(M=>!m.springs[M])?zt(m,C):new Promise(M=>{dr(m,T),c.queue.push(()=>{M(zt(m,C))}),o()})}}),[]),a=y.useRef([...c.ctrls]),u=[],A=Hs(t)||0;y.useMemo(()=>{b(a.current.slice(t,A),m=>{Ri(m,r),m.stop(!0)}),a.current.length=t,l(A,t)},[t]),y.useMemo(()=>{l(0,Math.min(A,t))},s);function l(m,C){for(let T=m;T<C;T++){const g=a.current[T]||(a.current[T]=new xi(null,c.flush)),M=n?n(T,g):e[T];M&&(u[T]=Li(M))}}const d=a.current.map((m,C)=>ks(m,u[C])),h=y.useContext(Dt),f=Hs(h),p=h!==f&&Ei(h);fs(()=>{i.current++,c.ctrls=a.current;const{queue:m}=c;m.length&&(c.queue=[],b(m,C=>C())),b(a.current,(C,T)=>{r==null||r.add(C),p&&C.start({default:h});const g=u[T];g&&(Mi(C,g.ref),C.ref?C.queue.push(g):C.start(g))})}),er(()=>()=>{b(c.ctrls,m=>m.stop(!0))});const B=d.map(m=>({...m}));return r?[B,r]:B}function Pi(t,e){const s=E.fun(t),[[n],r]=vi(1,s?t:[t],s?e||[]:e);return s||arguments.length==2?[n,r]:n}var Ni=class extends gs{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Pe(...e);const s=this._get(),n=Xt(s);Bs(this,n.create(s))}advance(t){const e=this._get(),s=this.get();Z(e,s)||(X(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Qs(this._active)&&xt(this)}_get(){const t=E.arr(this.source)?this.source.map(N):U(N(this.source));return this.calc(...t)}_start(){this.idle&&!Qs(this._active)&&(this.idle=!1,b(yt(this),t=>{t.done=!1}),j.skipAnimation?(R.batchedUpdates(()=>this.advance()),xt(this)):Mt.start(this))}_attach(){let t=1;b(U(this.source),e=>{V(e)&&Ve(e,this),Zt(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){b(U(this.source),t=>{V(t)&&ut(t,this)}),this._active.clear(),xt(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=U(this.source).reduce((e,s)=>Math.max(e,(Zt(s)?s.priority:0)+1),0))}};function Ji(t){return t.idle!==!1}function Qs(t){return!t.size||Array.from(t).every(Ji)}function xt(t){t.idle||(t.idle=!0,b(yt(t),e=>{e.done=!0}),ct(t,{type:"idle",parent:t}))}j.assign({createStringInterpolator:qn,to:(t,e)=>new Ni(t,e)});var Ui=["primitive"].concat(Object.keys(Mr).filter(t=>/^[A-Z]/.test(t)).map(t=>t[0].toLowerCase()+t.slice(1)));j.assign({createStringInterpolator:qn,colors:Or,frameLoop:"demand"});Fr(()=>{R.advance()});var Ki=pi(Ui,{applyAnimatedValues:Ir}),ki=Ki.animated;function js(t,e){if(e===sn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Fe||e===ht){let s=t.getIndex();if(s===null){const o=[],c=t.getAttribute("position");if(c!==void 0){for(let a=0;a<c.count;a++)o.push(a);t.setIndex(o),s=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const n=s.count-2,r=[];if(s)if(e===Fe)for(let o=1;o<=n;o++)r.push(s.getX(0)),r.push(s.getX(o)),r.push(s.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(s.getX(o)),r.push(s.getX(o+1)),r.push(s.getX(o+2))):(r.push(s.getX(o+2)),r.push(s.getX(o+1)),r.push(s.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=t.clone();return i.setIndex(r),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}function dt(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let s=0,n=t.length;s<n;s++)e+=String.fromCharCode(t[s]);try{return decodeURIComponent(escape(e))}catch{return e}}const he="srgb",q="srgb-linear",Xs=3001,Qi=3e3;let Ts=class extends ns{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(s){return new Zi(s)}),this.register(function(s){return new Wi(s)}),this.register(function(s){return new io(s)}),this.register(function(s){return new oo(s)}),this.register(function(s){return new ao(s)}),this.register(function(s){return new zi(s)}),this.register(function(s){return new $i(s)}),this.register(function(s){return new eo(s)}),this.register(function(s){return new to(s)}),this.register(function(s){return new Yi(s)}),this.register(function(s){return new so(s)}),this.register(function(s){return new qi(s)}),this.register(function(s){return new ro(s)}),this.register(function(s){return new no(s)}),this.register(function(s){return new Xi(s)}),this.register(function(s){return new co(s)}),this.register(function(s){return new uo(s)})}load(e,s,n,r){const i=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const u=ie.extractUrlBase(e);o=ie.resolveURL(u,this.path)}else o=ie.extractUrlBase(e);this.manager.itemStart(e);const c=function(u){r?r(u):console.error(u),i.manager.itemError(e),i.manager.itemEnd(e)},a=new Ie(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{i.parse(u,o,function(A){s(A),i.manager.itemEnd(e)},c)}catch(A){c(A)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,s,n,r){let i;const o={},c={};if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(dt(new Uint8Array(e.slice(0,4)))===pr){try{o[F.KHR_BINARY_GLTF]=new lo(e)}catch(A){r&&r(A);return}i=JSON.parse(o[F.KHR_BINARY_GLTF].content)}else i=JSON.parse(dt(new Uint8Array(e)));else i=e;if(i.asset===void 0||i.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const a=new Fo(i,{path:s||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});a.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const A=this.pluginCallbacks[u](a);A.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[A.name]=A,o[A.name]=!0}if(i.extensionsUsed)for(let u=0;u<i.extensionsUsed.length;++u){const A=i.extensionsUsed[u],l=i.extensionsRequired||[];switch(A){case F.KHR_MATERIALS_UNLIT:o[A]=new Vi;break;case F.KHR_DRACO_MESH_COMPRESSION:o[A]=new Ao(i,this.dracoLoader);break;case F.KHR_TEXTURE_TRANSFORM:o[A]=new ho;break;case F.KHR_MESH_QUANTIZATION:o[A]=new fo;break;default:l.indexOf(A)>=0&&c[A]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+A+'".')}}a.setExtensions(o),a.setPlugins(c),a.parse(n,r)}parseAsync(e,s){const n=this;return new Promise(function(r,i){n.parse(e,s,r,i)})}};function ji(){let t={};return{get:function(e){return t[e]},add:function(e,s){t[e]=s},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const F={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};let Xi=class{constructor(e){this.parser=e,this.name=F.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,s=this.parser.json.nodes||[];for(let n=0,r=s.length;n<r;n++){const i=s[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const s=this.parser,n="light:"+e;let r=s.cache.get(n);if(r)return r;const i=s.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let u;const A=new w(16777215);a.color!==void 0&&A.setRGB(a.color[0],a.color[1],a.color[2],q);const l=a.range!==void 0?a.range:0;switch(a.type){case"directional":u=new on(A),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new rn(A),u.distance=l;break;case"spot":u=new nn(A),u.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,u.angle=a.spot.outerConeAngle,u.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return u.position.set(0,0,0),u.decay=2,W(u,a),a.intensity!==void 0&&(u.intensity=a.intensity),u.name=s.createUniqueName(a.name||"light_"+e),r=Promise.resolve(u),s.cache.add(n,r),r}getDependency(e,s){if(e==="light")return this._loadLight(s)}createNodeAttachment(e){const s=this,n=this.parser,i=n.json.nodes[e],c=(i.extensions&&i.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(a){return n._getNodeRef(s.cache,c,a)})}},Vi=class{constructor(){this.name=F.KHR_MATERIALS_UNLIT}getMaterialType(){return Y}extendParams(e,s,n){const r=[];e.color=new w(1,1,1),e.opacity=1;const i=s.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const o=i.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],q),e.opacity=o[3]}i.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",i.baseColorTexture,he))}return Promise.all(r)}},Yi=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,s){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(s.emissiveIntensity=i),Promise.resolve()}},Zi=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(s.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&i.push(n.assignTexture(s,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(s.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(s,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(s,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;s.clearcoatNormalScale=new ft(c,c)}return Promise.all(i)}};class Wi{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return s.dispersion=i.dispersion!==void 0?i.dispersion:0,Promise.resolve()}}let qi=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(s.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&i.push(n.assignTexture(s,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(s.iridescenceIOR=o.iridescenceIor),s.iridescenceThicknessRange===void 0&&(s.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(s.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(s.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(s,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}},zi=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];s.sheenColor=new w(0,0,0),s.sheenRoughness=0,s.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;s.sheenColor.setRGB(c[0],c[1],c[2],q)}return o.sheenRoughnessFactor!==void 0&&(s.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&i.push(n.assignTexture(s,"sheenColorMap",o.sheenColorTexture,he)),o.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(s,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}},$i=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(s.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&i.push(n.assignTexture(s,"transmissionMap",o.transmissionTexture)),Promise.all(i)}},eo=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];s.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&i.push(n.assignTexture(s,"thicknessMap",o.thicknessTexture)),s.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return s.attenuationColor=new w().setRGB(c[0],c[1],c[2],q),Promise.all(i)}},to=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return s.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}},so=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];s.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&i.push(n.assignTexture(s,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return s.specularColor=new w().setRGB(c[0],c[1],c[2],q),o.specularColorTexture!==void 0&&i.push(n.assignTexture(s,"specularColorMap",o.specularColorTexture,he)),Promise.all(i)}};class no{constructor(e){this.parser=e,this.name=F.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return s.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&i.push(n.assignTexture(s,"bumpMap",o.bumpTexture)),Promise.all(i)}}let ro=class{constructor(e){this.parser=e,this.name=F.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(s.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(s.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&i.push(n.assignTexture(s,"anisotropyMap",o.anisotropyTexture)),Promise.all(i)}},io=class{constructor(e){this.parser=e,this.name=F.KHR_TEXTURE_BASISU}loadTexture(e){const s=this.parser,n=s.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=s.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return s.loadTextureImage(e,i.source,o)}},oo=class{constructor(e){this.parser=e,this.name=F.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const s=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[s])return null;const o=i.extensions[s],c=r.images[o.source];let a=n.textureLoader;if(c.uri){const u=n.options.manager.getHandler(c.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(s)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const s=new Image;s.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",s.onload=s.onerror=function(){e(s.height===1)}})),this.isSupported}},ao=class{constructor(e){this.parser=e,this.name=F.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const s=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[s])return null;const o=i.extensions[s],c=r.images[o.source];let a=n.textureLoader;if(c.uri){const u=n.options.manager.getHandler(c.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(s)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const s=new Image;s.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",s.onload=s.onerror=function(){e(s.height===1)}})),this.isSupported}},co=class{constructor(e){this.name=F.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const s=this.parser.json,n=s.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(c){const a=r.byteOffset||0,u=r.byteLength||0,A=r.count,l=r.byteStride,d=new Uint8Array(c,a,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(A,l,d,r.mode,r.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(A*l);return o.decodeGltfBuffer(new Uint8Array(h),A,l,d,r.mode,r.filter),h})})}else return null}},uo=class{constructor(e){this.name=F.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const s=this.parser.json,n=s.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=s.meshes[n.mesh];for(const u of r.primitives)if(u.mode!==v.TRIANGLES&&u.mode!==v.TRIANGLE_STRIP&&u.mode!==v.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,c=[],a={};for(const u in o)c.push(this.parser.getDependency("accessor",o[u]).then(A=>(a[u]=A,a[u])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(u=>{const A=u.pop(),l=A.isGroup?A.children:[A],d=u[0].count,h=[];for(const f of l){const p=new ce,B=new _,m=new Tt,C=new _(1,1,1),T=new an(f.geometry,f.material,d);for(let g=0;g<d;g++)a.TRANSLATION&&B.fromBufferAttribute(a.TRANSLATION,g),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,g),a.SCALE&&C.fromBufferAttribute(a.SCALE,g),T.setMatrixAt(g,p.compose(B,m,C));for(const g in a)if(g==="_COLOR_0"){const M=a[g];T.instanceColor=new Gr(M.array,M.itemSize,M.normalized)}else g!=="TRANSLATION"&&g!=="ROTATION"&&g!=="SCALE"&&f.geometry.setAttribute(g,a[g]);Bt.prototype.copy.call(T,f),this.parser.assignFinalMaterial(T),h.push(T)}return A.isGroup?(A.clear(),A.add(...h),A):h[0]}))}};const pr="glTF",He=12,Vs={JSON:1313821514,BIN:5130562};let lo=class{constructor(e){this.name=F.KHR_BINARY_GLTF,this.content=null,this.body=null;const s=new DataView(e,0,He);if(this.header={magic:dt(new Uint8Array(e.slice(0,4))),version:s.getUint32(4,!0),length:s.getUint32(8,!0)},this.header.magic!==pr)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-He,r=new DataView(e,He);let i=0;for(;i<n;){const o=r.getUint32(i,!0);i+=4;const c=r.getUint32(i,!0);if(i+=4,c===Vs.JSON){const a=new Uint8Array(e,He+i,o);this.content=dt(a)}else if(c===Vs.BIN){const a=He+i;this.body=e.slice(a,a+o)}i+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}},Ao=class{constructor(e,s){if(!s)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=F.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=s,this.dracoLoader.preload()}decodePrimitive(e,s){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},a={},u={};for(const A in o){const l=$t[A]||A.toLowerCase();c[l]=o[A]}for(const A in e.attributes){const l=$t[A]||A.toLowerCase();if(o[A]!==void 0){const d=n.accessors[e.attributes[A]],h=Re[d.componentType];u[l]=h.name,a[l]=d.normalized===!0}}return s.getDependency("bufferView",i).then(function(A){return new Promise(function(l,d){r.decodeDracoFile(A,function(h){for(const f in h.attributes){const p=h.attributes[f],B=a[f];B!==void 0&&(p.normalized=B)}l(h)},c,u,q,d)})})}},ho=class{constructor(){this.name=F.KHR_TEXTURE_TRANSFORM}extendTexture(e,s){return(s.texCoord===void 0||s.texCoord===e.channel)&&s.offset===void 0&&s.rotation===void 0&&s.scale===void 0||(e=e.clone(),s.texCoord!==void 0&&(e.channel=s.texCoord),s.offset!==void 0&&e.offset.fromArray(s.offset),s.rotation!==void 0&&(e.rotation=s.rotation),s.scale!==void 0&&e.repeat.fromArray(s.scale),e.needsUpdate=!0),e}},fo=class{constructor(){this.name=F.KHR_MESH_QUANTIZATION}},mr=class extends Pn{constructor(e,s,n,r){super(e,s,n,r)}copySampleValue_(e){const s=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)s[o]=n[i+o];return s}interpolate_(e,s,n,r){const i=this.resultBuffer,o=this.sampleValues,c=this.valueSize,a=c*2,u=c*3,A=r-s,l=(n-s)/A,d=l*l,h=d*l,f=e*u,p=f-u,B=-2*h+3*d,m=h-d,C=1-B,T=m-d+l;for(let g=0;g!==c;g++){const M=o[p+g+c],L=o[p+g+a]*A,I=o[f+g+c],S=o[f+g]*A;i[g]=C*M+T*L+B*I+m*S}return i}};const Bo=new Tt;let po=class extends mr{interpolate_(e,s,n,r){const i=super.interpolate_(e,s,n,r);return Bo.fromArray(i).normalize().toArray(i),i}};const v={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Re={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ys={9728:yn,9729:pt,9984:Dn,9985:bn,9986:Ln,9987:mt},Zs={33071:Hn,33648:Sn,10497:Ge},wt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$t={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...yr>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ee={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},mo={CUBICSPLINE:void 0,LINEAR:gt,STEP:_n},Ot={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Co(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Ct({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:xn})),t.DefaultMaterial}function le(t,e,s){for(const n in s.extensions)t[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=s.extensions[n])}function W(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function go(t,e,s){let n=!1,r=!1,i=!1;for(let u=0,A=e.length;u<A;u++){const l=e[u];if(l.POSITION!==void 0&&(n=!0),l.NORMAL!==void 0&&(r=!0),l.COLOR_0!==void 0&&(i=!0),n&&r&&i)break}if(!n&&!r&&!i)return Promise.resolve(t);const o=[],c=[],a=[];for(let u=0,A=e.length;u<A;u++){const l=e[u];if(n){const d=l.POSITION!==void 0?s.getDependency("accessor",l.POSITION):t.attributes.position;o.push(d)}if(r){const d=l.NORMAL!==void 0?s.getDependency("accessor",l.NORMAL):t.attributes.normal;c.push(d)}if(i){const d=l.COLOR_0!==void 0?s.getDependency("accessor",l.COLOR_0):t.attributes.color;a.push(d)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(a)]).then(function(u){const A=u[0],l=u[1],d=u[2];return n&&(t.morphAttributes.position=A),r&&(t.morphAttributes.normal=l),i&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function To(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let s=0,n=e.weights.length;s<n;s++)t.morphTargetInfluences[s]=e.weights[s];if(e.extras&&Array.isArray(e.extras.targetNames)){const s=e.extras.targetNames;if(t.morphTargetInfluences.length===s.length){t.morphTargetDictionary={};for(let n=0,r=s.length;n<r;n++)t.morphTargetDictionary[s[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Eo(t){let e;const s=t.extensions&&t.extensions[F.KHR_DRACO_MESH_COMPRESSION];if(s?e="draco:"+s.bufferView+":"+s.indices+":"+vt(s.attributes):e=t.indices+":"+vt(t.attributes)+":"+t.mode,t.targets!==void 0)for(let n=0,r=t.targets.length;n<r;n++)e+=":"+vt(t.targets[n]);return e}function vt(t){let e="";const s=Object.keys(t).sort();for(let n=0,r=s.length;n<r;n++)e+=s[n]+":"+t[s[n]]+";";return e}function es(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ro(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const Mo=new ce;let Fo=class{constructor(e={},s={}){this.json=e,this.extensions={},this.plugins={},this.options=s,this.cache=new ji,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&i<98?this.textureLoader=new cn(this.options.manager):this.textureLoader=new un(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ie(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,s){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const c={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return le(i,c,r),W(c,r),Promise.all(n._invokeAll(function(a){return a.afterRoot&&a.afterRoot(c)})).then(function(){for(const a of c.scenes)a.updateMatrixWorld();e(c)})}).catch(s)}_markDefs(){const e=this.json.nodes||[],s=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=s.length;r<i;r++){const o=s[r].joints;for(let c=0,a=o.length;c<a;c++)e[o[c]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,s){s!==void 0&&(e.refs[s]===void 0&&(e.refs[s]=e.uses[s]=0),e.refs[s]++)}_getNodeRef(e,s,n){if(e.refs[s]<=1)return n;const r=n.clone(),i=(o,c)=>{const a=this.associations.get(o);a!=null&&this.associations.set(c,a);for(const[u,A]of o.children.entries())i(A,c.children[u])};return i(n,r),r.name+="_instance_"+e.uses[s]++,r}_invokeOne(e){const s=Object.values(this.plugins);s.push(this);for(let n=0;n<s.length;n++){const r=e(s[n]);if(r)return r}return null}_invokeAll(e){const s=Object.values(this.plugins);s.unshift(this);const n=[];for(let r=0;r<s.length;r++){const i=e(s[r]);i&&n.push(i)}return n}getDependency(e,s){const n=e+":"+s;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(s);break;case"node":r=this._invokeOne(function(i){return i.loadNode&&i.loadNode(s)});break;case"mesh":r=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(s)});break;case"accessor":r=this.loadAccessor(s);break;case"bufferView":r=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(s)});break;case"buffer":r=this.loadBuffer(s);break;case"material":r=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(s)});break;case"texture":r=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(s)});break;case"skin":r=this.loadSkin(s);break;case"animation":r=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(s)});break;case"camera":r=this.loadCamera(s);break;default:if(r=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,s)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let s=this.cache.get(e);if(!s){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];s=Promise.all(r.map(function(i,o){return n.getDependency(e,o)})),this.cache.add(e,s)}return s}loadBuffer(e){const s=this.json.buffers[e],n=this.fileLoader;if(s.type&&s.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+s.type+" buffer type is not supported.");if(s.uri===void 0&&e===0)return Promise.resolve(this.extensions[F.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(i,o){n.load(ie.resolveURL(s.uri,r.path),i,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+s.uri+'".'))})})}loadBufferView(e){const s=this.json.bufferViews[e];return this.getDependency("buffer",s.buffer).then(function(n){const r=s.byteLength||0,i=s.byteOffset||0;return n.slice(i,i+r)})}loadAccessor(e){const s=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=wt[r.type],c=Re[r.componentType],a=r.normalized===!0,u=new c(r.count*o);return Promise.resolve(new oe(u,o,a))}const i=[];return r.bufferView!==void 0?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),r.sparse!==void 0&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(o){const c=o[0],a=wt[r.type],u=Re[r.componentType],A=u.BYTES_PER_ELEMENT,l=A*a,d=r.byteOffset||0,h=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,f=r.normalized===!0;let p,B;if(h&&h!==l){const m=Math.floor(d/h),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count;let T=s.cache.get(C);T||(p=new u(c,m*h,r.count*h/A),T=new ln(p,h/A),s.cache.add(C,T)),B=new wn(T,a,d%h/A,f)}else c===null?p=new u(r.count*a):p=new u(c,d,r.count*a),B=new oe(p,a,f);if(r.sparse!==void 0){const m=wt.SCALAR,C=Re[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,g=r.sparse.values.byteOffset||0,M=new C(o[1],T,r.sparse.count*m),L=new u(o[2],g,r.sparse.count*a);c!==null&&(B=new oe(B.array.slice(),B.itemSize,B.normalized));for(let I=0,S=M.length;I<S;I++){const D=M[I];if(B.setX(D,L[I*a]),a>=2&&B.setY(D,L[I*a+1]),a>=3&&B.setZ(D,L[I*a+2]),a>=4&&B.setW(D,L[I*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return B})}loadTexture(e){const s=this.json,n=this.options,i=s.textures[e].source,o=s.images[i];let c=this.textureLoader;if(o.uri){const a=n.manager.getHandler(o.uri);a!==null&&(c=a)}return this.loadTextureImage(e,i,c)}loadTextureImage(e,s,n){const r=this,i=this.json,o=i.textures[e],c=i.images[s],a=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const u=this.loadImageSource(s,n).then(function(A){A.flipY=!1,A.name=o.name||c.name||"",A.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(A.name=c.uri);const d=(i.samplers||{})[o.sampler]||{};return A.magFilter=Ys[d.magFilter]||pt,A.minFilter=Ys[d.minFilter]||mt,A.wrapS=Zs[d.wrapS]||Ge,A.wrapT=Zs[d.wrapT]||Ge,r.associations.set(A,{textures:e}),A}).catch(function(){return null});return this.textureCache[a]=u,u}loadImageSource(e,s){const n=this,r=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const o=r.images[e],c=self.URL||self.webkitURL;let a=o.uri||"",u=!1;if(o.bufferView!==void 0)a=n.getDependency("bufferView",o.bufferView).then(function(l){u=!0;const d=new Blob([l],{type:o.mimeType});return a=c.createObjectURL(d),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const A=Promise.resolve(a).then(function(l){return new Promise(function(d,h){let f=d;s.isImageBitmapLoader===!0&&(f=function(p){const B=new tt(p);B.needsUpdate=!0,d(B)}),s.load(ie.resolveURL(l,i.path),f,void 0,h)})}).then(function(l){return u===!0&&c.revokeObjectURL(a),W(l,o),l.userData.mimeType=o.mimeType||Ro(o.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),l});return this.sourceCache[e]=A,A}assignTexture(e,s,n,r){const i=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),i.extensions[F.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[F.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const a=i.associations.get(o);o=i.extensions[F.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),i.associations.set(o,a)}}return r!==void 0&&(typeof r=="number"&&(r=r===Xs?he:q),"colorSpace"in o?o.colorSpace=r:o.encoding=r===he?Xs:Qi),e[s]=o,o})}assignFinalMaterial(e){const s=e.geometry;let n=e.material;const r=s.attributes.tangent===void 0,i=s.attributes.color!==void 0,o=s.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let a=this.cache.get(c);a||(a=new An,Ce.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,a.sizeAttenuation=!1,this.cache.add(c,a)),n=a}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let a=this.cache.get(c);a||(a=new dn,Ce.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,this.cache.add(c,a)),n=a}if(r||i||o){let c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let a=this.cache.get(c);a||(a=n.clone(),i&&(a.vertexColors=!0),o&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(c,a),this.associations.set(a,this.associations.get(n))),n=a}e.material=n}getMaterialType(){return Ct}loadMaterial(e){const s=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const c={},a=i.extensions||{},u=[];if(a[F.KHR_MATERIALS_UNLIT]){const l=r[F.KHR_MATERIALS_UNLIT];o=l.getMaterialType(),u.push(l.extendParams(c,i,s))}else{const l=i.pbrMetallicRoughness||{};if(c.color=new w(1,1,1),c.opacity=1,Array.isArray(l.baseColorFactor)){const d=l.baseColorFactor;c.color.setRGB(d[0],d[1],d[2],q),c.opacity=d[3]}l.baseColorTexture!==void 0&&u.push(s.assignTexture(c,"map",l.baseColorTexture,he)),c.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,c.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(u.push(s.assignTexture(c,"metalnessMap",l.metallicRoughnessTexture)),u.push(s.assignTexture(c,"roughnessMap",l.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}i.doubleSided===!0&&(c.side=hn);const A=i.alphaMode||Ot.OPAQUE;if(A===Ot.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,A===Ot.MASK&&(c.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&o!==Y&&(u.push(s.assignTexture(c,"normalMap",i.normalTexture)),c.normalScale=new ft(1,1),i.normalTexture.scale!==void 0)){const l=i.normalTexture.scale;c.normalScale.set(l,l)}if(i.occlusionTexture!==void 0&&o!==Y&&(u.push(s.assignTexture(c,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&o!==Y){const l=i.emissiveFactor;c.emissive=new w().setRGB(l[0],l[1],l[2],q)}return i.emissiveTexture!==void 0&&o!==Y&&u.push(s.assignTexture(c,"emissiveMap",i.emissiveTexture,he)),Promise.all(u).then(function(){const l=new o(c);return i.name&&(l.name=i.name),W(l,i),s.associations.set(l,{materials:e}),i.extensions&&le(r,l,i),l})}createUniqueName(e){const s=fn.sanitizeNodeName(e||"");return s in this.nodeNamesUsed?s+"_"+ ++this.nodeNamesUsed[s]:(this.nodeNamesUsed[s]=0,s)}loadGeometries(e){const s=this,n=this.extensions,r=this.primitiveCache;function i(c){return n[F.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,s).then(function(a){return Ws(a,c,s)})}const o=[];for(let c=0,a=e.length;c<a;c++){const u=e[c],A=Eo(u),l=r[A];if(l)o.push(l.promise);else{let d;u.extensions&&u.extensions[F.KHR_DRACO_MESH_COMPRESSION]?d=i(u):d=Ws(new rs,u,s),r[A]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const s=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,c=[];for(let a=0,u=o.length;a<u;a++){const A=o[a].material===void 0?Co(this.cache):this.getDependency("material",o[a].material);c.push(A)}return c.push(s.loadGeometries(o)),Promise.all(c).then(function(a){const u=a.slice(0,a.length-1),A=a[a.length-1],l=[];for(let h=0,f=A.length;h<f;h++){const p=A[h],B=o[h];let m;const C=u[h];if(B.mode===v.TRIANGLES||B.mode===v.TRIANGLE_STRIP||B.mode===v.TRIANGLE_FAN||B.mode===void 0)m=i.isSkinnedMesh===!0?new Bn(p,C):new pn(p,C),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),B.mode===v.TRIANGLE_STRIP?m.geometry=js(m.geometry,ht):B.mode===v.TRIANGLE_FAN&&(m.geometry=js(m.geometry,Fe));else if(B.mode===v.LINES)m=new mn(p,C);else if(B.mode===v.LINE_STRIP)m=new Cn(p,C);else if(B.mode===v.LINE_LOOP)m=new gn(p,C);else if(B.mode===v.POINTS)m=new Tn(p,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+B.mode);Object.keys(m.geometry.morphAttributes).length>0&&To(m,i),m.name=s.createUniqueName(i.name||"mesh_"+e),W(m,i),B.extensions&&le(r,m,B),s.assignFinalMaterial(m),l.push(m)}for(let h=0,f=l.length;h<f;h++)s.associations.set(l[h],{meshes:e,primitives:h});if(l.length===1)return i.extensions&&le(r,l[0],i),l[0];const d=new ge;i.extensions&&le(r,d,i),s.associations.set(d,{meshes:e});for(let h=0,f=l.length;h<f;h++)d.add(l[h]);return d})}loadCamera(e){let s;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?s=new En(Rn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(s=new Mn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(s.name=this.createUniqueName(n.name)),W(s,n),Promise.resolve(s)}loadSkin(e){const s=this.json.skins[e],n=[];for(let r=0,i=s.joints.length;r<i;r++)n.push(this._loadNodeShallow(s.joints[r]));return s.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",s.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const i=r.pop(),o=r,c=[],a=[];for(let u=0,A=o.length;u<A;u++){const l=o[u];if(l){c.push(l);const d=new ce;i!==null&&d.fromArray(i.array,u*16),a.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',s.joints[u])}return new Fn(c,a)})}loadAnimation(e){const s=this.json,n=this,r=s.animations[e],i=r.name?r.name:"animation_"+e,o=[],c=[],a=[],u=[],A=[];for(let l=0,d=r.channels.length;l<d;l++){const h=r.channels[l],f=r.samplers[h.sampler],p=h.target,B=p.node,m=r.parameters!==void 0?r.parameters[f.input]:f.input,C=r.parameters!==void 0?r.parameters[f.output]:f.output;p.node!==void 0&&(o.push(this.getDependency("node",B)),c.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",C)),u.push(f),A.push(p))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(a),Promise.all(u),Promise.all(A)]).then(function(l){const d=l[0],h=l[1],f=l[2],p=l[3],B=l[4],m=[];for(let C=0,T=d.length;C<T;C++){const g=d[C],M=h[C],L=f[C],I=p[C],S=B[C];if(g===void 0)continue;g.updateMatrix&&g.updateMatrix();const D=n._createAnimationTracks(g,M,L,I,S);if(D)for(let O=0;O<D.length;O++)m.push(D[O])}return new In(i,void 0,m)})}createNodeMesh(e){const s=this.json,n=this,r=s.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(i){const o=n._getNodeRef(n.meshCache,r.mesh,i);return r.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let a=0,u=r.weights.length;a<u;a++)c.morphTargetInfluences[a]=r.weights[a]}),o})}loadNode(e){const s=this.json,n=this,r=s.nodes[e],i=n._loadNodeShallow(e),o=[],c=r.children||[];for(let u=0,A=c.length;u<A;u++)o.push(n.getDependency("node",c[u]));const a=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([i,Promise.all(o),a]).then(function(u){const A=u[0],l=u[1],d=u[2];d!==null&&A.traverse(function(h){h.isSkinnedMesh&&h.bind(d,Mo)});for(let h=0,f=l.length;h<f;h++)A.add(l[h]);return A})}_loadNodeShallow(e){const s=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=s.nodes[e],o=i.name?r.createUniqueName(i.name):"",c=[],a=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return a&&c.push(a),i.camera!==void 0&&c.push(r.getDependency("camera",i.camera).then(function(u){return r._getNodeRef(r.cameraCache,i.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){c.push(u)}),this.nodeCache[e]=Promise.all(c).then(function(u){let A;if(i.isBone===!0?A=new Gn:u.length>1?A=new ge:u.length===1?A=u[0]:A=new Bt,A!==u[0])for(let l=0,d=u.length;l<d;l++)A.add(u[l]);if(i.name&&(A.userData.name=i.name,A.name=o),W(A,i),i.extensions&&le(n,A,i),i.matrix!==void 0){const l=new ce;l.fromArray(i.matrix),A.applyMatrix4(l)}else i.translation!==void 0&&A.position.fromArray(i.translation),i.rotation!==void 0&&A.quaternion.fromArray(i.rotation),i.scale!==void 0&&A.scale.fromArray(i.scale);return r.associations.has(A)||r.associations.set(A,{}),r.associations.get(A).nodes=e,A}),this.nodeCache[e]}loadScene(e){const s=this.extensions,n=this.json.scenes[e],r=this,i=new ge;n.name&&(i.name=r.createUniqueName(n.name)),W(i,n),n.extensions&&le(s,i,n);const o=n.nodes||[],c=[];for(let a=0,u=o.length;a<u;a++)c.push(r.getDependency("node",o[a]));return Promise.all(c).then(function(a){for(let A=0,l=a.length;A<l;A++)i.add(a[A]);const u=A=>{const l=new Map;for(const[d,h]of r.associations)(d instanceof Ce||d instanceof tt)&&l.set(d,h);return A.traverse(d=>{const h=r.associations.get(d);h!=null&&l.set(d,h)}),l};return r.associations=u(i),i})}_createAnimationTracks(e,s,n,r,i){const o=[],c=e.name?e.name:e.uuid,a=[];ee[i.path]===ee.weights?e.traverse(function(d){d.morphTargetInfluences&&a.push(d.name?d.name:d.uuid)}):a.push(c);let u;switch(ee[i.path]){case ee.weights:u=nt;break;case ee.rotation:u=rt;break;case ee.position:case ee.scale:u=st;break;default:switch(n.itemSize){case 1:u=nt;break;case 2:case 3:default:u=st;break}break}const A=r.interpolation!==void 0?mo[r.interpolation]:gt,l=this._getArrayFromAccessor(n);for(let d=0,h=a.length;d<h;d++){const f=new u(a[d]+"."+ee[i.path],s.array,l,A);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(e){let s=e.array;if(e.normalized){const n=es(s.constructor),r=new Float32Array(s.length);for(let i=0,o=s.length;i<o;i++)r[i]=s[i]*n;s=r}return s}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof rt?po:mr;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}};function Io(t,e,s){const n=e.attributes,r=new On;if(n.POSITION!==void 0){const c=s.json.accessors[n.POSITION],a=c.min,u=c.max;if(a!==void 0&&u!==void 0){if(r.set(new _(a[0],a[1],a[2]),new _(u[0],u[1],u[2])),c.normalized){const A=es(Re[c.componentType]);r.min.multiplyScalar(A),r.max.multiplyScalar(A)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const c=new _,a=new _;for(let u=0,A=i.length;u<A;u++){const l=i[u];if(l.POSITION!==void 0){const d=s.json.accessors[l.POSITION],h=d.min,f=d.max;if(h!==void 0&&f!==void 0){if(a.setX(Math.max(Math.abs(h[0]),Math.abs(f[0]))),a.setY(Math.max(Math.abs(h[1]),Math.abs(f[1]))),a.setZ(Math.max(Math.abs(h[2]),Math.abs(f[2]))),d.normalized){const p=es(Re[d.componentType]);a.multiplyScalar(p)}c.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}t.boundingBox=r;const o=new vn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function Ws(t,e,s){const n=e.attributes,r=[];function i(o,c){return s.getDependency("accessor",o).then(function(a){t.setAttribute(c,a)})}for(const o in n){const c=$t[o]||o.toLowerCase();c in t.attributes||r.push(i(n[o],c))}if(e.indices!==void 0&&!t.index){const o=s.getDependency("accessor",e.indices).then(function(c){t.setIndex(c)});r.push(o)}return W(t,e),Io(t,e,s),Promise.all(r).then(function(){return e.targets!==void 0?go(t,e.targets,s):t})}const Pt=new WeakMap;class Go extends ns{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,s,n,r){const i=new Ie(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,o=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,c).then(s).catch(r)},n,r)}decodeDracoFile(e,s,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(s)}decodeGeometry(e,s){for(const a in s.attributeTypes){const u=s.attributeTypes[a];u.BYTES_PER_ELEMENT!==void 0&&(s.attributeTypes[a]=u.name)}const n=JSON.stringify(s);if(Pt.has(e)){const a=Pt.get(e);if(a.key===n)return a.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,c=this._getWorker(i,o).then(a=>(r=a,new Promise((u,A)=>{r._callbacks[i]={resolve:u,reject:A},r.postMessage({type:"decode",id:i,taskConfig:s,buffer:e},[e])}))).then(a=>this._createGeometry(a.geometry));return c.catch(()=>!0).then(()=>{r&&i&&this._releaseTask(r,i)}),Pt.set(e,{key:n,promise:c}),c}_createGeometry(e){const s=new rs;e.index&&s.setIndex(new oe(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,o=r.array,c=r.itemSize;s.setAttribute(i,new oe(o,c))}return s}_loadLibrary(e,s){const n=new Ie(this.manager);return n.setPath(this.decoderPath),n.setResponseType(s),n.setWithCredentials(this.withCredentials),new Promise((r,i)=>{n.load(e,r,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",s=[];return e?s.push(this._loadLibrary("draco_decoder.js","text")):(s.push(this._loadLibrary("draco_wasm_wrapper.js","text")),s.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(s).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const i=yo.toString(),o=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,s){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(i){const o=i.data;switch(o.type){case"decode":r._callbacks[o.id].resolve(o);break;case"error":r._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,i){return r._taskLoad>i._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=s,n._taskLoad+=s,n})}_releaseTask(e,s){e._taskLoad-=e._taskCosts[s],delete e._callbacks[s],delete e._taskCosts[s]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function yo(){let t,e;onmessage=function(o){const c=o.data;switch(c.type){case"init":t=c.decoderConfig,e=new Promise(function(A){t.onModuleLoaded=function(l){A({draco:l})},DracoDecoderModule(t)});break;case"decode":const a=c.buffer,u=c.taskConfig;e.then(A=>{const l=A.draco,d=new l.Decoder,h=new l.DecoderBuffer;h.Init(new Int8Array(a),a.byteLength);try{const f=s(l,d,h,u),p=f.attributes.map(B=>B.array.buffer);f.index&&p.push(f.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:f},p)}catch(f){console.error(f),self.postMessage({type:"error",id:c.id,error:f.message})}finally{l.destroy(h),l.destroy(d)}});break}};function s(o,c,a,u){const A=u.attributeIDs,l=u.attributeTypes;let d,h;const f=c.GetEncodedGeometryType(a);if(f===o.TRIANGULAR_MESH)d=new o.Mesh,h=c.DecodeBufferToMesh(a,d);else if(f===o.POINT_CLOUD)d=new o.PointCloud,h=c.DecodeBufferToPointCloud(a,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const p={index:null,attributes:[]};for(const B in A){const m=self[l[B]];let C,T;if(u.useUniqueIDs)T=A[B],C=c.GetAttributeByUniqueId(d,T);else{if(T=c.GetAttributeId(d,o[A[B]]),T===-1)continue;C=c.GetAttribute(d,T)}p.attributes.push(r(o,c,d,B,m,C))}return f===o.TRIANGULAR_MESH&&(p.index=n(o,c,d)),o.destroy(d),p}function n(o,c,a){const A=a.num_faces()*3,l=A*4,d=o._malloc(l);c.GetTrianglesUInt32Array(a,l,d);const h=new Uint32Array(o.HEAPF32.buffer,d,A).slice();return o._free(d),{array:h,itemSize:1}}function r(o,c,a,u,A,l){const d=l.num_components(),f=a.num_points()*d,p=f*A.BYTES_PER_ELEMENT,B=i(o,A),m=o._malloc(p);c.GetAttributeDataArrayForAllPoints(a,l,B,p,m);const C=new A(o.HEAPF32.buffer,m,f).slice();return o._free(m),{name:u,array:C,itemSize:d}}function i(o,c){switch(c){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let ze;const Nt=()=>{if(ze)return ze;const t="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",e="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",s=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=t;WebAssembly.validate(s)&&(r=e);let i;const o=WebAssembly.instantiate(c(r),{}).then(l=>{i=l.instance,i.exports.__wasm_call_ctors()});function c(l){const d=new Uint8Array(l.length);for(let f=0;f<l.length;++f){const p=l.charCodeAt(f);d[f]=p>96?p-71:p>64?p-65:p>47?p+4:p>46?63:62}let h=0;for(let f=0;f<l.length;++f)d[h++]=d[f]<60?n[d[f]]:(d[f]-60)*64+d[++f];return d.buffer.slice(0,h)}function a(l,d,h,f,p,B){const m=i.exports.sbrk,C=h+3&-4,T=m(C*f),g=m(p.length),M=new Uint8Array(i.exports.memory.buffer);M.set(p,g);const L=l(T,h,f,g,p.length);if(L===0&&B&&B(T,C,f),d.set(M.subarray(T,T+h*f)),m(T-m(0)),L!==0)throw new Error(`Malformed buffer data: ${L}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},A={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return ze={ready:o,supported:!0,decodeVertexBuffer(l,d,h,f,p){a(i.exports.meshopt_decodeVertexBuffer,l,d,h,f,i.exports[u[p]])},decodeIndexBuffer(l,d,h,f){a(i.exports.meshopt_decodeIndexBuffer,l,d,h,f)},decodeIndexSequence(l,d,h,f){a(i.exports.meshopt_decodeIndexSequence,l,d,h,f)},decodeGltfBuffer(l,d,h,f,p,B){a(i.exports[A[p]],l,d,h,f,i.exports[u[B]])}},ze};let $e=null,Cr="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function gr(t=!0,e=!0,s){return n=>{s&&s(n),t&&($e||($e=new Go),$e.setDecoderPath(typeof t=="string"?t:Cr),n.setDRACOLoader($e)),e&&n.setMeshoptDecoder(typeof Nt=="function"?Nt():Nt)}}const bt=(t,e,s,n)=>Et(Ts,t,gr(e,s,n));bt.preload=(t,e,s,n)=>Et.preload(Ts,t,gr(e,s,n));bt.clear=t=>Et.clear(Ts,t);bt.setDecoderPath=t=>{Cr=t};function qs(t,e){if(e===sn)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),t;if(e===Fe||e===ht){let s=t.getIndex();if(s===null){const o=[],c=t.getAttribute("position");if(c!==void 0){for(let a=0;a<c.count;a++)o.push(a);t.setIndex(o),s=t.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t}const n=s.count-2,r=[];if(e===Fe)for(let o=1;o<=n;o++)r.push(s.getX(0)),r.push(s.getX(o)),r.push(s.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(s.getX(o)),r.push(s.getX(o+1)),r.push(s.getX(o+2))):(r.push(s.getX(o+2)),r.push(s.getX(o+1)),r.push(s.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const i=t.clone();return i.setIndex(r),i.clearGroups(),i}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),t}class Do extends ns{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(s){return new _o(s)}),this.register(function(s){return new Uo(s)}),this.register(function(s){return new Ko(s)}),this.register(function(s){return new ko(s)}),this.register(function(s){return new wo(s)}),this.register(function(s){return new Oo(s)}),this.register(function(s){return new vo(s)}),this.register(function(s){return new Po(s)}),this.register(function(s){return new So(s)}),this.register(function(s){return new No(s)}),this.register(function(s){return new xo(s)}),this.register(function(s){return new Jo(s)}),this.register(function(s){return new Lo(s)}),this.register(function(s){return new Qo(s)}),this.register(function(s){return new jo(s)})}load(e,s,n,r){const i=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=ie.extractUrlBase(e),this.manager.itemStart(e);const c=function(u){r?r(u):console.error(u),i.manager.itemError(e),i.manager.itemEnd(e)},a=new Ie(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{i.parse(u,o,function(A){s(A),i.manager.itemEnd(e)},c)}catch(A){c(A)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,s,n,r){let i;const o={},c={},a=new TextDecoder;if(typeof e=="string")i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(a.decode(new Uint8Array(e,0,4))===Tr){try{o[G.KHR_BINARY_GLTF]=new Xo(e)}catch(l){r&&r(l);return}i=JSON.parse(o[G.KHR_BINARY_GLTF].content)}else i=JSON.parse(a.decode(e));else i=e;if(i.asset===void 0||i.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new ia(i,{path:s||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const l=this.pluginCallbacks[A](u);c[l.name]=l,o[l.name]=!0}if(i.extensionsUsed)for(let A=0;A<i.extensionsUsed.length;++A){const l=i.extensionsUsed[A],d=i.extensionsRequired||[];switch(l){case G.KHR_MATERIALS_UNLIT:o[l]=new Ho;break;case G.KHR_DRACO_MESH_COMPRESSION:o[l]=new Vo(i,this.dracoLoader);break;case G.KHR_TEXTURE_TRANSFORM:o[l]=new Yo;break;case G.KHR_MESH_QUANTIZATION:o[l]=new Zo;break;default:d.indexOf(l)>=0&&c[l]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+l+'".')}}u.setExtensions(o),u.setPlugins(c),u.parse(n,r)}parseAsync(e,s){const n=this;return new Promise(function(r,i){n.parse(e,s,r,i)})}}function bo(){let t={};return{get:function(e){return t[e]},add:function(e,s){t[e]=s},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const G={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Lo{constructor(e){this.parser=e,this.name=G.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,s=this.parser.json.nodes||[];for(let n=0,r=s.length;n<r;n++){const i=s[n];i.extensions&&i.extensions[this.name]&&i.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(e){const s=this.parser,n="light:"+e;let r=s.cache.get(n);if(r)return r;const i=s.json,a=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let u;const A=new w(16777215);a.color!==void 0&&A.setRGB(a.color[0],a.color[1],a.color[2],ue);const l=a.range!==void 0?a.range:0;switch(a.type){case"directional":u=new on(A),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new rn(A),u.distance=l;break;case"spot":u=new nn(A),u.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=a.spot.innerConeAngle!==void 0?a.spot.innerConeAngle:0,a.spot.outerConeAngle=a.spot.outerConeAngle!==void 0?a.spot.outerConeAngle:Math.PI/4,u.angle=a.spot.outerConeAngle,u.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return u.position.set(0,0,0),u.decay=2,se(u,a),a.intensity!==void 0&&(u.intensity=a.intensity),u.name=s.createUniqueName(a.name||"light_"+e),r=Promise.resolve(u),s.cache.add(n,r),r}getDependency(e,s){if(e==="light")return this._loadLight(s)}createNodeAttachment(e){const s=this,n=this.parser,i=n.json.nodes[e],c=(i.extensions&&i.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(a){return n._getNodeRef(s.cache,c,a)})}}class Ho{constructor(){this.name=G.KHR_MATERIALS_UNLIT}getMaterialType(){return Y}extendParams(e,s,n){const r=[];e.color=new w(1,1,1),e.opacity=1;const i=s.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const o=i.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],ue),e.opacity=o[3]}i.baseColorTexture!==void 0&&r.push(n.assignTexture(e,"map",i.baseColorTexture,ve))}return Promise.all(r)}}class So{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,s){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name].emissiveStrength;return i!==void 0&&(s.emissiveIntensity=i),Promise.resolve()}}class _o{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(o.clearcoatFactor!==void 0&&(s.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&i.push(n.assignTexture(s,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(s.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&i.push(n.assignTexture(s,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(i.push(n.assignTexture(s,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const c=o.clearcoatNormalTexture.scale;s.clearcoatNormalScale=new ft(c,c)}return Promise.all(i)}}class xo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.iridescenceFactor!==void 0&&(s.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&i.push(n.assignTexture(s,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(s.iridescenceIOR=o.iridescenceIor),s.iridescenceThicknessRange===void 0&&(s.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(s.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(s.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&i.push(n.assignTexture(s,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class wo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];s.sheenColor=new w(0,0,0),s.sheenRoughness=0,s.sheen=1;const o=r.extensions[this.name];if(o.sheenColorFactor!==void 0){const c=o.sheenColorFactor;s.sheenColor.setRGB(c[0],c[1],c[2],ue)}return o.sheenRoughnessFactor!==void 0&&(s.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&i.push(n.assignTexture(s,"sheenColorMap",o.sheenColorTexture,ve)),o.sheenRoughnessTexture!==void 0&&i.push(n.assignTexture(s,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class Oo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.transmissionFactor!==void 0&&(s.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&i.push(n.assignTexture(s,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class vo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];s.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&i.push(n.assignTexture(s,"thicknessMap",o.thicknessTexture)),s.attenuationDistance=o.attenuationDistance||1/0;const c=o.attenuationColor||[1,1,1];return s.attenuationColor=new w().setRGB(c[0],c[1],c[2],ue),Promise.all(i)}}class Po{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=r.extensions[this.name];return s.ior=i.ior!==void 0?i.ior:1.5,Promise.resolve()}}class No{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];s.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&i.push(n.assignTexture(s,"specularIntensityMap",o.specularTexture));const c=o.specularColorFactor||[1,1,1];return s.specularColor=new w().setRGB(c[0],c[1],c[2],ue),o.specularColorTexture!==void 0&&i.push(n.assignTexture(s,"specularColorMap",o.specularColorTexture,ve)),Promise.all(i)}}class Jo{constructor(e){this.parser=e,this.name=G.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:H}extendMaterialParams(e,s){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return o.anisotropyStrength!==void 0&&(s.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(s.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&i.push(n.assignTexture(s,"anisotropyMap",o.anisotropyTexture)),Promise.all(i)}}class Uo{constructor(e){this.parser=e,this.name=G.KHR_TEXTURE_BASISU}loadTexture(e){const s=this.parser,n=s.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=s.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return s.loadTextureImage(e,i.source,o)}}class Ko{constructor(e){this.parser=e,this.name=G.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const s=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[s])return null;const o=i.extensions[s],c=r.images[o.source];let a=n.textureLoader;if(c.uri){const u=n.options.manager.getHandler(c.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(s)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const s=new Image;s.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",s.onload=s.onerror=function(){e(s.height===1)}})),this.isSupported}}class ko{constructor(e){this.parser=e,this.name=G.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const s=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[s])return null;const o=i.extensions[s],c=r.images[o.source];let a=n.textureLoader;if(c.uri){const u=n.options.manager.getHandler(c.uri);u!==null&&(a=u)}return this.detectSupport().then(function(u){if(u)return n.loadTextureImage(e,o.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(s)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const s=new Image;s.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",s.onload=s.onerror=function(){e(s.height===1)}})),this.isSupported}}class Qo{constructor(e){this.name=G.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const s=this.parser.json,n=s.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return i.then(function(c){const a=r.byteOffset||0,u=r.byteLength||0,A=r.count,l=r.byteStride,d=new Uint8Array(c,a,u);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(A,l,d,r.mode,r.filter).then(function(h){return h.buffer}):o.ready.then(function(){const h=new ArrayBuffer(A*l);return o.decodeGltfBuffer(new Uint8Array(h),A,l,d,r.mode,r.filter),h})})}else return null}}class jo{constructor(e){this.name=G.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const s=this.parser.json,n=s.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const r=s.meshes[n.mesh];for(const u of r.primitives)if(u.mode!==P.TRIANGLES&&u.mode!==P.TRIANGLE_STRIP&&u.mode!==P.TRIANGLE_FAN&&u.mode!==void 0)return null;const o=n.extensions[this.name].attributes,c=[],a={};for(const u in o)c.push(this.parser.getDependency("accessor",o[u]).then(A=>(a[u]=A,a[u])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(u=>{const A=u.pop(),l=A.isGroup?A.children:[A],d=u[0].count,h=[];for(const f of l){const p=new ce,B=new _,m=new Tt,C=new _(1,1,1),T=new an(f.geometry,f.material,d);for(let g=0;g<d;g++)a.TRANSLATION&&B.fromBufferAttribute(a.TRANSLATION,g),a.ROTATION&&m.fromBufferAttribute(a.ROTATION,g),a.SCALE&&C.fromBufferAttribute(a.SCALE,g),T.setMatrixAt(g,p.compose(B,m,C));for(const g in a)g!=="TRANSLATION"&&g!=="ROTATION"&&g!=="SCALE"&&f.geometry.setAttribute(g,a[g]);Bt.prototype.copy.call(T,f),this.parser.assignFinalMaterial(T),h.push(T)}return A.isGroup?(A.clear(),A.add(...h),A):h[0]}))}}const Tr="glTF",Se=12,zs={JSON:1313821514,BIN:5130562};class Xo{constructor(e){this.name=G.KHR_BINARY_GLTF,this.content=null,this.body=null;const s=new DataView(e,0,Se),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:s.getUint32(4,!0),length:s.getUint32(8,!0)},this.header.magic!==Tr)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-Se,i=new DataView(e,Se);let o=0;for(;o<r;){const c=i.getUint32(o,!0);o+=4;const a=i.getUint32(o,!0);if(o+=4,a===zs.JSON){const u=new Uint8Array(e,Se+o,c);this.content=n.decode(u)}else if(a===zs.BIN){const u=Se+o;this.body=e.slice(u,u+c)}o+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Vo{constructor(e,s){if(!s)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=G.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=s,this.dracoLoader.preload()}decodePrimitive(e,s){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,c={},a={},u={};for(const A in o){const l=ts[A]||A.toLowerCase();c[l]=o[A]}for(const A in e.attributes){const l=ts[A]||A.toLowerCase();if(o[A]!==void 0){const d=n.accessors[e.attributes[A]],h=Me[d.componentType];u[l]=h.name,a[l]=d.normalized===!0}}return s.getDependency("bufferView",i).then(function(A){return new Promise(function(l){r.decodeDracoFile(A,function(d){for(const h in d.attributes){const f=d.attributes[h],p=a[h];p!==void 0&&(f.normalized=p)}l(d)},c,u)})})}}class Yo{constructor(){this.name=G.KHR_TEXTURE_TRANSFORM}extendTexture(e,s){return(s.texCoord===void 0||s.texCoord===e.channel)&&s.offset===void 0&&s.rotation===void 0&&s.scale===void 0||(e=e.clone(),s.texCoord!==void 0&&(e.channel=s.texCoord),s.offset!==void 0&&e.offset.fromArray(s.offset),s.rotation!==void 0&&(e.rotation=s.rotation),s.scale!==void 0&&e.repeat.fromArray(s.scale),e.needsUpdate=!0),e}}class Zo{constructor(){this.name=G.KHR_MESH_QUANTIZATION}}class Er extends Pn{constructor(e,s,n,r){super(e,s,n,r)}copySampleValue_(e){const s=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)s[o]=n[i+o];return s}interpolate_(e,s,n,r){const i=this.resultBuffer,o=this.sampleValues,c=this.valueSize,a=c*2,u=c*3,A=r-s,l=(n-s)/A,d=l*l,h=d*l,f=e*u,p=f-u,B=-2*h+3*d,m=h-d,C=1-B,T=m-d+l;for(let g=0;g!==c;g++){const M=o[p+g+c],L=o[p+g+a]*A,I=o[f+g+c],S=o[f+g]*A;i[g]=C*M+T*L+B*I+m*S}return i}}const Wo=new Tt;class qo extends Er{interpolate_(e,s,n,r){const i=super.interpolate_(e,s,n,r);return Wo.fromArray(i).normalize().toArray(i),i}}const P={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Me={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$s={9728:yn,9729:pt,9984:Dn,9985:bn,9986:Ln,9987:mt},en={33071:Hn,33648:Sn,10497:Ge},Jt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ts={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},te={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zo={CUBICSPLINE:void 0,LINEAR:gt,STEP:_n},Ut={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function $o(t){return t.DefaultMaterial===void 0&&(t.DefaultMaterial=new Ct({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:xn})),t.DefaultMaterial}function Ae(t,e,s){for(const n in s.extensions)t[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=s.extensions[n])}function se(t,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function ea(t,e,s){let n=!1,r=!1,i=!1;for(let u=0,A=e.length;u<A;u++){const l=e[u];if(l.POSITION!==void 0&&(n=!0),l.NORMAL!==void 0&&(r=!0),l.COLOR_0!==void 0&&(i=!0),n&&r&&i)break}if(!n&&!r&&!i)return Promise.resolve(t);const o=[],c=[],a=[];for(let u=0,A=e.length;u<A;u++){const l=e[u];if(n){const d=l.POSITION!==void 0?s.getDependency("accessor",l.POSITION):t.attributes.position;o.push(d)}if(r){const d=l.NORMAL!==void 0?s.getDependency("accessor",l.NORMAL):t.attributes.normal;c.push(d)}if(i){const d=l.COLOR_0!==void 0?s.getDependency("accessor",l.COLOR_0):t.attributes.color;a.push(d)}}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(a)]).then(function(u){const A=u[0],l=u[1],d=u[2];return n&&(t.morphAttributes.position=A),r&&(t.morphAttributes.normal=l),i&&(t.morphAttributes.color=d),t.morphTargetsRelative=!0,t})}function ta(t,e){if(t.updateMorphTargets(),e.weights!==void 0)for(let s=0,n=e.weights.length;s<n;s++)t.morphTargetInfluences[s]=e.weights[s];if(e.extras&&Array.isArray(e.extras.targetNames)){const s=e.extras.targetNames;if(t.morphTargetInfluences.length===s.length){t.morphTargetDictionary={};for(let n=0,r=s.length;n<r;n++)t.morphTargetDictionary[s[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function sa(t){let e;const s=t.extensions&&t.extensions[G.KHR_DRACO_MESH_COMPRESSION];if(s?e="draco:"+s.bufferView+":"+s.indices+":"+Kt(s.attributes):e=t.indices+":"+Kt(t.attributes)+":"+t.mode,t.targets!==void 0)for(let n=0,r=t.targets.length;n<r;n++)e+=":"+Kt(t.targets[n]);return e}function Kt(t){let e="";const s=Object.keys(t).sort();for(let n=0,r=s.length;n<r;n++)e+=s[n]+":"+t[s[n]]+";";return e}function ss(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function na(t){return t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0?"image/jpeg":t.search(/\.webp($|\?)/i)>0||t.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ra=new ce;class ia{constructor(e={},s={}){this.json=e,this.extensions={},this.plugins={},this.options=s,this.cache=new bo,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;typeof navigator<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||r&&i<98?this.textureLoader=new cn(this.options.manager):this.textureLoader=new un(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ie(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,s){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const c={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Ae(i,c,r),se(c,r),Promise.all(n._invokeAll(function(a){return a.afterRoot&&a.afterRoot(c)})).then(function(){e(c)})}).catch(s)}_markDefs(){const e=this.json.nodes||[],s=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=s.length;r<i;r++){const o=s[r].joints;for(let c=0,a=o.length;c<a;c++)e[o[c]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const o=e[r];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,s){s!==void 0&&(e.refs[s]===void 0&&(e.refs[s]=e.uses[s]=0),e.refs[s]++)}_getNodeRef(e,s,n){if(e.refs[s]<=1)return n;const r=n.clone(),i=(o,c)=>{const a=this.associations.get(o);a!=null&&this.associations.set(c,a);for(const[u,A]of o.children.entries())i(A,c.children[u])};return i(n,r),r.name+="_instance_"+e.uses[s]++,r}_invokeOne(e){const s=Object.values(this.plugins);s.push(this);for(let n=0;n<s.length;n++){const r=e(s[n]);if(r)return r}return null}_invokeAll(e){const s=Object.values(this.plugins);s.unshift(this);const n=[];for(let r=0;r<s.length;r++){const i=e(s[r]);i&&n.push(i)}return n}getDependency(e,s){const n=e+":"+s;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(s);break;case"node":r=this._invokeOne(function(i){return i.loadNode&&i.loadNode(s)});break;case"mesh":r=this._invokeOne(function(i){return i.loadMesh&&i.loadMesh(s)});break;case"accessor":r=this.loadAccessor(s);break;case"bufferView":r=this._invokeOne(function(i){return i.loadBufferView&&i.loadBufferView(s)});break;case"buffer":r=this.loadBuffer(s);break;case"material":r=this._invokeOne(function(i){return i.loadMaterial&&i.loadMaterial(s)});break;case"texture":r=this._invokeOne(function(i){return i.loadTexture&&i.loadTexture(s)});break;case"skin":r=this.loadSkin(s);break;case"animation":r=this._invokeOne(function(i){return i.loadAnimation&&i.loadAnimation(s)});break;case"camera":r=this.loadCamera(s);break;default:if(r=this._invokeOne(function(i){return i!=this&&i.getDependency&&i.getDependency(e,s)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(n,r)}return r}getDependencies(e){let s=this.cache.get(e);if(!s){const n=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];s=Promise.all(r.map(function(i,o){return n.getDependency(e,o)})),this.cache.add(e,s)}return s}loadBuffer(e){const s=this.json.buffers[e],n=this.fileLoader;if(s.type&&s.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+s.type+" buffer type is not supported.");if(s.uri===void 0&&e===0)return Promise.resolve(this.extensions[G.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(i,o){n.load(ie.resolveURL(s.uri,r.path),i,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+s.uri+'".'))})})}loadBufferView(e){const s=this.json.bufferViews[e];return this.getDependency("buffer",s.buffer).then(function(n){const r=s.byteLength||0,i=s.byteOffset||0;return n.slice(i,i+r)})}loadAccessor(e){const s=this,n=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const o=Jt[r.type],c=Me[r.componentType],a=r.normalized===!0,u=new c(r.count*o);return Promise.resolve(new oe(u,o,a))}const i=[];return r.bufferView!==void 0?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),r.sparse!==void 0&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(o){const c=o[0],a=Jt[r.type],u=Me[r.componentType],A=u.BYTES_PER_ELEMENT,l=A*a,d=r.byteOffset||0,h=r.bufferView!==void 0?n.bufferViews[r.bufferView].byteStride:void 0,f=r.normalized===!0;let p,B;if(h&&h!==l){const m=Math.floor(d/h),C="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+m+":"+r.count;let T=s.cache.get(C);T||(p=new u(c,m*h,r.count*h/A),T=new ln(p,h/A),s.cache.add(C,T)),B=new wn(T,a,d%h/A,f)}else c===null?p=new u(r.count*a):p=new u(c,d,r.count*a),B=new oe(p,a,f);if(r.sparse!==void 0){const m=Jt.SCALAR,C=Me[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,g=r.sparse.values.byteOffset||0,M=new C(o[1],T,r.sparse.count*m),L=new u(o[2],g,r.sparse.count*a);c!==null&&(B=new oe(B.array.slice(),B.itemSize,B.normalized));for(let I=0,S=M.length;I<S;I++){const D=M[I];if(B.setX(D,L[I*a]),a>=2&&B.setY(D,L[I*a+1]),a>=3&&B.setZ(D,L[I*a+2]),a>=4&&B.setW(D,L[I*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return B})}loadTexture(e){const s=this.json,n=this.options,i=s.textures[e].source,o=s.images[i];let c=this.textureLoader;if(o.uri){const a=n.manager.getHandler(o.uri);a!==null&&(c=a)}return this.loadTextureImage(e,i,c)}loadTextureImage(e,s,n){const r=this,i=this.json,o=i.textures[e],c=i.images[s],a=(c.uri||c.bufferView)+":"+o.sampler;if(this.textureCache[a])return this.textureCache[a];const u=this.loadImageSource(s,n).then(function(A){A.flipY=!1,A.name=o.name||c.name||"",A.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(A.name=c.uri);const d=(i.samplers||{})[o.sampler]||{};return A.magFilter=$s[d.magFilter]||pt,A.minFilter=$s[d.minFilter]||mt,A.wrapS=en[d.wrapS]||Ge,A.wrapT=en[d.wrapT]||Ge,r.associations.set(A,{textures:e}),A}).catch(function(){return null});return this.textureCache[a]=u,u}loadImageSource(e,s){const n=this,r=this.json,i=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(l=>l.clone());const o=r.images[e],c=self.URL||self.webkitURL;let a=o.uri||"",u=!1;if(o.bufferView!==void 0)a=n.getDependency("bufferView",o.bufferView).then(function(l){u=!0;const d=new Blob([l],{type:o.mimeType});return a=c.createObjectURL(d),a});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const A=Promise.resolve(a).then(function(l){return new Promise(function(d,h){let f=d;s.isImageBitmapLoader===!0&&(f=function(p){const B=new tt(p);B.needsUpdate=!0,d(B)}),s.load(ie.resolveURL(l,i.path),f,void 0,h)})}).then(function(l){return u===!0&&c.revokeObjectURL(a),l.userData.mimeType=o.mimeType||na(o.uri),l}).catch(function(l){throw console.error("THREE.GLTFLoader: Couldn't load texture",a),l});return this.sourceCache[e]=A,A}assignTexture(e,s,n,r){const i=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),i.extensions[G.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[G.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const a=i.associations.get(o);o=i.extensions[G.KHR_TEXTURE_TRANSFORM].extendTexture(o,c),i.associations.set(o,a)}}return r!==void 0&&(o.colorSpace=r),e[s]=o,o})}assignFinalMaterial(e){const s=e.geometry;let n=e.material;const r=s.attributes.tangent===void 0,i=s.attributes.color!==void 0,o=s.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let a=this.cache.get(c);a||(a=new An,Ce.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,a.sizeAttenuation=!1,this.cache.add(c,a)),n=a}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let a=this.cache.get(c);a||(a=new dn,Ce.prototype.copy.call(a,n),a.color.copy(n.color),a.map=n.map,this.cache.add(c,a)),n=a}if(r||i||o){let c="ClonedMaterial:"+n.uuid+":";r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),o&&(c+="flat-shading:");let a=this.cache.get(c);a||(a=n.clone(),i&&(a.vertexColors=!0),o&&(a.flatShading=!0),r&&(a.normalScale&&(a.normalScale.y*=-1),a.clearcoatNormalScale&&(a.clearcoatNormalScale.y*=-1)),this.cache.add(c,a),this.associations.set(a,this.associations.get(n))),n=a}e.material=n}getMaterialType(){return Ct}loadMaterial(e){const s=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const c={},a=i.extensions||{},u=[];if(a[G.KHR_MATERIALS_UNLIT]){const l=r[G.KHR_MATERIALS_UNLIT];o=l.getMaterialType(),u.push(l.extendParams(c,i,s))}else{const l=i.pbrMetallicRoughness||{};if(c.color=new w(1,1,1),c.opacity=1,Array.isArray(l.baseColorFactor)){const d=l.baseColorFactor;c.color.setRGB(d[0],d[1],d[2],ue),c.opacity=d[3]}l.baseColorTexture!==void 0&&u.push(s.assignTexture(c,"map",l.baseColorTexture,ve)),c.metalness=l.metallicFactor!==void 0?l.metallicFactor:1,c.roughness=l.roughnessFactor!==void 0?l.roughnessFactor:1,l.metallicRoughnessTexture!==void 0&&(u.push(s.assignTexture(c,"metalnessMap",l.metallicRoughnessTexture)),u.push(s.assignTexture(c,"roughnessMap",l.metallicRoughnessTexture))),o=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,c)})))}i.doubleSided===!0&&(c.side=hn);const A=i.alphaMode||Ut.OPAQUE;if(A===Ut.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,A===Ut.MASK&&(c.alphaTest=i.alphaCutoff!==void 0?i.alphaCutoff:.5)),i.normalTexture!==void 0&&o!==Y&&(u.push(s.assignTexture(c,"normalMap",i.normalTexture)),c.normalScale=new ft(1,1),i.normalTexture.scale!==void 0)){const l=i.normalTexture.scale;c.normalScale.set(l,l)}if(i.occlusionTexture!==void 0&&o!==Y&&(u.push(s.assignTexture(c,"aoMap",i.occlusionTexture)),i.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=i.occlusionTexture.strength)),i.emissiveFactor!==void 0&&o!==Y){const l=i.emissiveFactor;c.emissive=new w().setRGB(l[0],l[1],l[2],ue)}return i.emissiveTexture!==void 0&&o!==Y&&u.push(s.assignTexture(c,"emissiveMap",i.emissiveTexture,ve)),Promise.all(u).then(function(){const l=new o(c);return i.name&&(l.name=i.name),se(l,i),s.associations.set(l,{materials:e}),i.extensions&&Ae(r,l,i),l})}createUniqueName(e){const s=fn.sanitizeNodeName(e||"");return s in this.nodeNamesUsed?s+"_"+ ++this.nodeNamesUsed[s]:(this.nodeNamesUsed[s]=0,s)}loadGeometries(e){const s=this,n=this.extensions,r=this.primitiveCache;function i(c){return n[G.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,s).then(function(a){return tn(a,c,s)})}const o=[];for(let c=0,a=e.length;c<a;c++){const u=e[c],A=sa(u),l=r[A];if(l)o.push(l.promise);else{let d;u.extensions&&u.extensions[G.KHR_DRACO_MESH_COMPRESSION]?d=i(u):d=tn(new rs,u,s),r[A]={primitive:u,promise:d},o.push(d)}}return Promise.all(o)}loadMesh(e){const s=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,c=[];for(let a=0,u=o.length;a<u;a++){const A=o[a].material===void 0?$o(this.cache):this.getDependency("material",o[a].material);c.push(A)}return c.push(s.loadGeometries(o)),Promise.all(c).then(function(a){const u=a.slice(0,a.length-1),A=a[a.length-1],l=[];for(let h=0,f=A.length;h<f;h++){const p=A[h],B=o[h];let m;const C=u[h];if(B.mode===P.TRIANGLES||B.mode===P.TRIANGLE_STRIP||B.mode===P.TRIANGLE_FAN||B.mode===void 0)m=i.isSkinnedMesh===!0?new Bn(p,C):new pn(p,C),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),B.mode===P.TRIANGLE_STRIP?m.geometry=qs(m.geometry,ht):B.mode===P.TRIANGLE_FAN&&(m.geometry=qs(m.geometry,Fe));else if(B.mode===P.LINES)m=new mn(p,C);else if(B.mode===P.LINE_STRIP)m=new Cn(p,C);else if(B.mode===P.LINE_LOOP)m=new gn(p,C);else if(B.mode===P.POINTS)m=new Tn(p,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+B.mode);Object.keys(m.geometry.morphAttributes).length>0&&ta(m,i),m.name=s.createUniqueName(i.name||"mesh_"+e),se(m,i),B.extensions&&Ae(r,m,B),s.assignFinalMaterial(m),l.push(m)}for(let h=0,f=l.length;h<f;h++)s.associations.set(l[h],{meshes:e,primitives:h});if(l.length===1)return i.extensions&&Ae(r,l[0],i),l[0];const d=new ge;i.extensions&&Ae(r,d,i),s.associations.set(d,{meshes:e});for(let h=0,f=l.length;h<f;h++)d.add(l[h]);return d})}loadCamera(e){let s;const n=this.json.cameras[e],r=n[n.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?s=new En(Rn.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):n.type==="orthographic"&&(s=new Mn(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(s.name=this.createUniqueName(n.name)),se(s,n),Promise.resolve(s)}loadSkin(e){const s=this.json.skins[e],n=[];for(let r=0,i=s.joints.length;r<i;r++)n.push(this._loadNodeShallow(s.joints[r]));return s.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",s.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(r){const i=r.pop(),o=r,c=[],a=[];for(let u=0,A=o.length;u<A;u++){const l=o[u];if(l){c.push(l);const d=new ce;i!==null&&d.fromArray(i.array,u*16),a.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',s.joints[u])}return new Fn(c,a)})}loadAnimation(e){const s=this.json,n=this,r=s.animations[e],i=r.name?r.name:"animation_"+e,o=[],c=[],a=[],u=[],A=[];for(let l=0,d=r.channels.length;l<d;l++){const h=r.channels[l],f=r.samplers[h.sampler],p=h.target,B=p.node,m=r.parameters!==void 0?r.parameters[f.input]:f.input,C=r.parameters!==void 0?r.parameters[f.output]:f.output;p.node!==void 0&&(o.push(this.getDependency("node",B)),c.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",C)),u.push(f),A.push(p))}return Promise.all([Promise.all(o),Promise.all(c),Promise.all(a),Promise.all(u),Promise.all(A)]).then(function(l){const d=l[0],h=l[1],f=l[2],p=l[3],B=l[4],m=[];for(let C=0,T=d.length;C<T;C++){const g=d[C],M=h[C],L=f[C],I=p[C],S=B[C];if(g===void 0)continue;g.updateMatrix&&g.updateMatrix();const D=n._createAnimationTracks(g,M,L,I,S);if(D)for(let O=0;O<D.length;O++)m.push(D[O])}return new In(i,void 0,m)})}createNodeMesh(e){const s=this.json,n=this,r=s.nodes[e];return r.mesh===void 0?null:n.getDependency("mesh",r.mesh).then(function(i){const o=n._getNodeRef(n.meshCache,r.mesh,i);return r.weights!==void 0&&o.traverse(function(c){if(c.isMesh)for(let a=0,u=r.weights.length;a<u;a++)c.morphTargetInfluences[a]=r.weights[a]}),o})}loadNode(e){const s=this.json,n=this,r=s.nodes[e],i=n._loadNodeShallow(e),o=[],c=r.children||[];for(let u=0,A=c.length;u<A;u++)o.push(n.getDependency("node",c[u]));const a=r.skin===void 0?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([i,Promise.all(o),a]).then(function(u){const A=u[0],l=u[1],d=u[2];d!==null&&A.traverse(function(h){h.isSkinnedMesh&&h.bind(d,ra)});for(let h=0,f=l.length;h<f;h++)A.add(l[h]);return A})}_loadNodeShallow(e){const s=this.json,n=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const i=s.nodes[e],o=i.name?r.createUniqueName(i.name):"",c=[],a=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return a&&c.push(a),i.camera!==void 0&&c.push(r.getDependency("camera",i.camera).then(function(u){return r._getNodeRef(r.cameraCache,i.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){c.push(u)}),this.nodeCache[e]=Promise.all(c).then(function(u){let A;if(i.isBone===!0?A=new Gn:u.length>1?A=new ge:u.length===1?A=u[0]:A=new Bt,A!==u[0])for(let l=0,d=u.length;l<d;l++)A.add(u[l]);if(i.name&&(A.userData.name=i.name,A.name=o),se(A,i),i.extensions&&Ae(n,A,i),i.matrix!==void 0){const l=new ce;l.fromArray(i.matrix),A.applyMatrix4(l)}else i.translation!==void 0&&A.position.fromArray(i.translation),i.rotation!==void 0&&A.quaternion.fromArray(i.rotation),i.scale!==void 0&&A.scale.fromArray(i.scale);return r.associations.has(A)||r.associations.set(A,{}),r.associations.get(A).nodes=e,A}),this.nodeCache[e]}loadScene(e){const s=this.extensions,n=this.json.scenes[e],r=this,i=new ge;n.name&&(i.name=r.createUniqueName(n.name)),se(i,n),n.extensions&&Ae(s,i,n);const o=n.nodes||[],c=[];for(let a=0,u=o.length;a<u;a++)c.push(r.getDependency("node",o[a]));return Promise.all(c).then(function(a){for(let A=0,l=a.length;A<l;A++)i.add(a[A]);const u=A=>{const l=new Map;for(const[d,h]of r.associations)(d instanceof Ce||d instanceof tt)&&l.set(d,h);return A.traverse(d=>{const h=r.associations.get(d);h!=null&&l.set(d,h)}),l};return r.associations=u(i),i})}_createAnimationTracks(e,s,n,r,i){const o=[],c=e.name?e.name:e.uuid,a=[];te[i.path]===te.weights?e.traverse(function(d){d.morphTargetInfluences&&a.push(d.name?d.name:d.uuid)}):a.push(c);let u;switch(te[i.path]){case te.weights:u=nt;break;case te.rotation:u=rt;break;case te.position:case te.scale:u=st;break;default:switch(n.itemSize){case 1:u=nt;break;case 2:case 3:default:u=st;break}break}const A=r.interpolation!==void 0?zo[r.interpolation]:gt,l=this._getArrayFromAccessor(n);for(let d=0,h=a.length;d<h;d++){const f=new u(a[d]+"."+te[i.path],s.array,l,A);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(e){let s=e.array;if(e.normalized){const n=ss(s.constructor),r=new Float32Array(s.length);for(let i=0,o=s.length;i<o;i++)r[i]=s[i]*n;s=r}return s}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const r=this instanceof rt?qo:Er;return new r(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function oa(t,e,s){const n=e.attributes,r=new On;if(n.POSITION!==void 0){const c=s.json.accessors[n.POSITION],a=c.min,u=c.max;if(a!==void 0&&u!==void 0){if(r.set(new _(a[0],a[1],a[2]),new _(u[0],u[1],u[2])),c.normalized){const A=ss(Me[c.componentType]);r.min.multiplyScalar(A),r.max.multiplyScalar(A)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const i=e.targets;if(i!==void 0){const c=new _,a=new _;for(let u=0,A=i.length;u<A;u++){const l=i[u];if(l.POSITION!==void 0){const d=s.json.accessors[l.POSITION],h=d.min,f=d.max;if(h!==void 0&&f!==void 0){if(a.setX(Math.max(Math.abs(h[0]),Math.abs(f[0]))),a.setY(Math.max(Math.abs(h[1]),Math.abs(f[1]))),a.setZ(Math.max(Math.abs(h[2]),Math.abs(f[2]))),d.normalized){const p=ss(Me[d.componentType]);a.multiplyScalar(p)}c.max(a)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}t.boundingBox=r;const o=new vn;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=o}function tn(t,e,s){const n=e.attributes,r=[];function i(o,c){return s.getDependency("accessor",o).then(function(a){t.setAttribute(c,a)})}for(const o in n){const c=ts[o]||o.toLowerCase();c in t.attributes||r.push(i(n[o],c))}if(e.indices!==void 0&&!t.index){const o=s.getDependency("accessor",e.indices).then(function(c){t.setIndex(c)});r.push(o)}return Es.workingColorSpace!==ue&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Es.workingColorSpace}" not supported.`),se(t,e),oa(t,e,s),Promise.all(r).then(function(){return e.targets!==void 0?ea(t,e.targets,s):t})}const aa=({position:t,color:e})=>{const s=y.useRef(),n=y.useMemo(()=>new _((Math.random()-.5)*.315,(Math.random()-.5)*.315,(Math.random()-.5)*.315),[]);return Nn(()=>{s.current&&(s.current.position.add(n),n.y-=5e-4,s.current.scale.multiplyScalar(.985),s.current.scale.x<.01)}),x.jsxs("mesh",{ref:s,position:t.clone(),children:[x.jsx("sphereGeometry",{args:[.05,8,8]})," ",x.jsx("meshBasicMaterial",{color:e})]})},ca=({originPosition:t,color:e=9115399})=>{const s=y.useMemo(()=>Array.from({length:350},(n,r)=>({id:r,position:t.clone().add(new _((Math.random()-.5)*.1,(Math.random()-.5)*.1+2.5,(Math.random()-.5)*.1)),color:e})),[]);return x.jsx("group",{children:s.map(n=>x.jsx(aa,{position:n.position,color:n.color},n.id))})},wa=({exploded:t=!1})=>{const e=y.useRef(null),n=Et(Do,"/models/guitarraBoy3.gltf"),[r,i]=y.useState(!0),o=y.useRef(new _(0,10,0)),c=Pi({rotation:[0,Math.PI*2,0],config:{duration:2e4},loop:!t}),a=y.useRef(0);Nn(h=>{!e.current||t||(a.current++,e.current.position.y=Math.sin(h.clock.elapsedTime*.6)*.06)}),y.useEffect(()=>{e.current&&(e.current.scale.set(.5,.5,.5),e.current.position.z=0,e.current.position.x=0)},[e]),y.useEffect(()=>{var f;const h=n.nodes.guitarraBoy2;if(h&&e.current){const p=new _;h.getWorldPosition(p),o.current.copy(p)}else console.warn("guitarraBoy2 node not found for setting explosion origin."),(f=e.current)==null||f.getWorldPosition(o.current);i(!1)},[n,r]);const u=n==null?void 0:n.nodes.guitarraBoy2,A=n==null?void 0:n.nodes["Glasses-front"],l=n==null?void 0:n.nodes["Glasses_temple-Left_part"],d=n==null?void 0:n.nodes["Glasses_temple-Right_part"];return x.jsx(x.Fragment,{children:x.jsxs(ki.group,{ref:e,rotation:c.rotation,dispose:null,children:[!t&&r===!1&&x.jsxs(x.Fragment,{children:[u&&x.jsx("primitive",{object:u}),A&&x.jsx("primitive",{object:A}),l&&x.jsx("primitive",{object:l}),d&&x.jsx("primitive",{object:d})]}),t&&x.jsx(ca,{originPosition:o.current})]})})};bt.preload("/models/guitarraBoy3.gltf");export{wa as default};
